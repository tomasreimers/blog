"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{68839:function(t,e,a){a.d(e,{C1:function(){return c},Lf:function(){return insertNode},XO:function(){return u},Yn:function(){return Y},ZH:function(){return D},aH:function(){return X},dW:function(){return isValidShape},gU:function(){return O},jr:function(){return g},us:function(){return v}});var r=a(52720),l=a(54703),n=a(7749),i=a(68414),s=a(58222),o=a(68227),h=a(74247),c=(0,s.eW)(async(t,e,a)=>{let r,l;let h=e.useHtmlLabels||(0,s.ku)(s.nV()?.htmlLabels);r=a||"node default";let c=t.insert("g").attr("class",r).attr("id",e.domId||e.id),d=c.insert("g").attr("class","label").attr("style",(0,i.R7)(e.labelStyle));l=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];let g=await (0,n.rw)(d,(0,s.oO)((0,i.SH)(l),(0,s.nV)()),{useHtmlLabels:h,width:e.width||s.nV().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),y=g.getBBox(),p=(e?.padding??0)/2;if(h){let t=g.children[0],e=(0,o.Ys)(g),a=t.getElementsByTagName("img");if(a){let t=""===l.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function setupImage(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=(0,s.nV)().fontSize?(0,s.nV)().fontSize:window.getComputedStyle(document.body).fontSize,[a=s.vZ.fontSize]=(0,i.VG)(t),r=5*a+"px";e.style.minWidth=r,e.style.maxWidth=r}else e.style.width="100%";a(e)}(0,s.eW)(setupImage,"setupImage"),setTimeout(()=>{e.complete&&setupImage()}),e.addEventListener("error",setupImage),e.addEventListener("load",setupImage)})))}y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}return h?d.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"):d.attr("transform","translate(0, "+-y.height/2+")"),e.centerLabel&&d.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),d.insert("rect",":first-child"),{shapeSvg:c,bbox:y,halfPadding:p,label:d}},"labelHelper"),d=(0,s.eW)(async(t,e,a)=>{let r=a.useHtmlLabels||(0,s.ku)(s.nV()?.flowchart?.htmlLabels),l=t.insert("g").attr("class","label").attr("style",a.labelStyle||""),h=await (0,n.rw)(l,(0,s.oO)((0,i.SH)(e),(0,s.nV)()),{useHtmlLabels:r,width:a.width||s.nV()?.flowchart?.wrappingWidth,style:a.labelStyle,addSvgBackground:!!a.icon||!!a.img}),c=h.getBBox(),d=a.padding/2;if((0,s.ku)(s.nV()?.flowchart?.htmlLabels)){let t=h.children[0],e=(0,o.Ys)(h);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}return r?l.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):l.attr("transform","translate(0, "+-c.height/2+")"),a.centerLabel&&l.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),l.insert("rect",":first-child"),{shapeSvg:t,bbox:c,halfPadding:d,label:l}},"insertLabel"),g=(0,s.eW)((t,e)=>{let a=e.node().getBBox();t.width=a.width,t.height=a.height},"updateNodeBounds"),y=(0,s.eW)((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function createPathFromPoints(t){let e=t.map((t,e)=>`${0===e?"M":"L"}${t.x},${t.y}`);return e.push("Z"),e.join(" ")}function generateFullSineWavePoints(t,e,a,r,l,n){let i=[],s=a-t,o=2*Math.PI/(s/n),h=e+(r-e)/2;for(let e=0;e<=50;e++){let a=e/50,r=t+a*s,n=h+l*Math.sin(o*(r-t));i.push({x:r,y:n})}return i}function generateCirclePoints(t,e,a,r,l,n){let i=[],s=l*Math.PI/180,o=(n*Math.PI/180-s)/(r-1);for(let l=0;l<r;l++){let r=s+l*o,n=t+a*Math.cos(r),h=e+a*Math.sin(r);i.push({x:-n,y:-h})}return i}(0,s.eW)(createPathFromPoints,"createPathFromPoints"),(0,s.eW)(generateFullSineWavePoints,"generateFullSineWavePoints"),(0,s.eW)(generateCirclePoints,"generateCirclePoints");var p=(0,s.eW)((t,e)=>{var a,r,l=t.x,n=t.y,i=e.x-l,s=e.y-n,o=t.width/2,h=t.height/2;return Math.abs(s)*o>Math.abs(i)*h?(s<0&&(h=-h),a=0===s?0:h*i/s,r=h):(i<0&&(o=-o),a=o,r=0===i?0:o*s/i),{x:l+a,y:n+r}},"intersectRect");function applyStyle(t,e){e&&t.attr("style",e)}async function addHtmlLabel(t){let e=(0,o.Ys)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=e.append("xhtml:div"),r=t.label;t.label&&(0,s.l0)(t.label)&&(r=await (0,s.uT)(t.label.replace(s.SY.lineBreakRegex,"\n"),(0,s.nV)()));let l=t.isNode?"nodeLabel":"edgeLabel";return a.html('<span class="'+l+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),applyStyle(a,t.labelStyle),a.style("display","inline-block"),a.style("padding-right","1px"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}(0,s.eW)(applyStyle,"applyStyle"),(0,s.eW)(addHtmlLabel,"addHtmlLabel");var u=(0,s.eW)(async(t,e,a,r)=>{let l=t||"";if("object"==typeof l&&(l=l[0]),(0,s.ku)((0,s.nV)().flowchart.htmlLabels)){l=l.replace(/\\n|\n/g,"<br />"),s.cM.info("vertexText"+l);let t={isNode:r,label:(0,i.SH)(l).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:e?e.replace("fill:","color:"):e};return await addHtmlLabel(t)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));for(let e of"string"==typeof l?l.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(l)?l:[]){let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),a?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},"createLabel"),f=(0,s.eW)((t,e,a,r,l)=>["M",t+l,e,"H",t+a-l,"A",l,l,0,0,1,t+a,e+l,"V",e+r-l,"A",l,l,0,0,1,t+a-l,e+r,"H",t+l,"A",l,l,0,0,1,t,e+r-l,"V",e+l,"A",l,l,0,0,1,t+l,e,"Z"].join(" "),"createRoundedRectPathD"),m=(0,s.eW)(t=>{let{handDrawnSeed:e}=(0,s.nV)();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),x=(0,s.eW)(t=>{let e=w([...t.cssCompiledStyles||[],...t.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),w=(0,s.eW)(t=>{let e=new Map;return t.forEach(t=>{let[a,r]=t.split(":");e.set(a.trim(),r?.trim())}),e},"styles2Map"),b=(0,s.eW)(t=>{let{stylesArray:e}=x(t),a=[],r=[],l=[],n=[];return e.forEach(t=>{let e=t[0];"color"===e||"font-size"===e||"font-family"===e||"font-weight"===e||"font-style"===e||"text-decoration"===e||"text-align"===e||"text-transform"===e||"line-height"===e||"letter-spacing"===e||"word-spacing"===e||"text-shadow"===e||"text-overflow"===e||"white-space"===e||"word-wrap"===e||"word-break"===e||"overflow-wrap"===e||"hyphens"===e?a.push(t.join(":")+" !important"):(r.push(t.join(":")+" !important"),e.includes("stroke")&&l.push(t.join(":")+" !important"),"fill"===e&&n.push(t.join(":")+" !important"))}),{labelStyles:a.join(";"),nodeStyles:r.join(";"),stylesArray:e,borderStyles:l,backgroundStyles:n}},"styles2String"),$=(0,s.eW)((t,e)=>{let{themeVariables:a,handDrawnSeed:r}=(0,s.nV)(),{nodeBorder:l,mainBkg:n}=a,{stylesMap:i}=x(t),o=Object.assign({roughness:.7,fill:i.get("fill")||n,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:i.get("stroke")||l,seed:r,strokeWidth:i.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0]},e);return o},"userNodeOverrides"),k=(0,s.eW)(async(t,e)=>{let a;s.cM.info("Creating subgraph rect for ",e.id,e);let r=(0,s.nV)(),{themeVariables:i,handDrawnSeed:c}=r,{clusterBkg:d,clusterBorder:g}=i,{labelStyles:y,nodeStyles:u,borderStyles:m,backgroundStyles:x}=b(e),w=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),k=(0,s.ku)(r.flowchart.htmlLabels),S=w.insert("g").attr("class","cluster-label "),P=await (0,n.rw)(S,e.label,{style:e.labelStyle,useHtmlLabels:k,isNode:!0}),M=P.getBBox();if((0,s.ku)(r.flowchart.htmlLabels)){let t=P.children[0],e=(0,o.Ys)(P);M=t.getBoundingClientRect(),e.attr("width",M.width),e.attr("height",M.height)}let C=e.width<=M.width+e.padding?M.width+e.padding:e.width;e.width<=M.width+e.padding?e.diff=(C-e.width)/2-e.padding:e.diff=-e.padding;let W=e.height,v=e.x-C/2,D=e.y-W/2;if(s.cM.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=h.Z.svg(w),r=$(e,{roughness:.7,fill:d,stroke:g,fillWeight:3,seed:c}),l=t.path(f(v,D,C,W,0),r);(a=w.insert(()=>(s.cM.debug("Rough node insert CXC",l),l),":first-child")).select("path:nth-child(2)").attr("style",m.join(";")),a.select("path").attr("style",x.join(";").replace("fill","stroke"))}else(a=w.insert("rect",":first-child")).attr("style",u).attr("rx",e.rx).attr("ry",e.ry).attr("x",v).attr("y",D).attr("width",C).attr("height",W);let{subGraphTitleTopMargin:R}=(0,l.L)(r);if(S.attr("transform",`translate(${e.x-M.width/2}, ${e.y-e.height/2+R})`),y){let t=S.select("span");t&&t.attr("style",y)}let N=a.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=M.height-e.padding/2,e.intersect=function(t){return p(e,t)},{cluster:w,labelBBox:M}},"rect"),S=(0,s.eW)((t,e)=>{let a=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=a.insert("rect",":first-child"),l=0*e.padding,n=l/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+l).attr("height",e.height+l).attr("fill","none");let i=r.node().getBBox();return e.width=i.width,e.height=i.height,e.intersect=function(t){return p(e,t)},{cluster:a,labelBBox:{width:0,height:0}}},"noteGroup"),P=(0,s.eW)(async(t,e)=>{let a;let r=(0,s.nV)(),{themeVariables:l,handDrawnSeed:n}=r,{altBackground:i,compositeBackground:c,compositeTitleBackground:d,nodeBorder:g}=l,y=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),m=y.insert("g",":first-child"),x=y.insert("g").attr("class","cluster-label"),w=y.append("rect"),b=x.node().appendChild(await u(e.label,e.labelStyle,void 0,!0)),$=b.getBBox();if((0,s.ku)(r.flowchart.htmlLabels)){let t=b.children[0],e=(0,o.Ys)(b);$=t.getBoundingClientRect(),e.attr("width",$.width),e.attr("height",$.height)}let k=0*e.padding,S=(e.width<=$.width+e.padding?$.width+e.padding:e.width)+k;e.width<=$.width+e.padding?e.diff=(S-e.width)/2-e.padding:e.diff=-e.padding;let P=e.height+k,M=e.height+k-$.height-6,C=e.x-S/2,W=e.y-P/2;e.width=S;let v=e.y-e.height/2-k/2+$.height+2;if("handDrawn"===e.look){let t=e.cssClasses.includes("statediagram-cluster-alt"),r=h.Z.svg(y),l=e.rx||e.ry?r.path(f(C,W,S,P,10),{roughness:.7,fill:d,fillStyle:"solid",stroke:g,seed:n}):r.rectangle(C,W,S,P,{seed:n});a=y.insert(()=>l,":first-child");let s=r.rectangle(C,v,S,M,{fill:t?i:c,fillStyle:t?"hachure":"solid",stroke:g,seed:n});a=y.insert(()=>l,":first-child"),w=y.insert(()=>s)}else(a=m.insert("rect",":first-child")).attr("class","outer").attr("x",C).attr("y",W).attr("width",S).attr("height",P).attr("data-look",e.look),w.attr("class","inner").attr("x",C).attr("y",v).attr("width",S).attr("height",M);x.attr("transform",`translate(${e.x-$.width/2}, ${W+1-((0,s.ku)(r.flowchart.htmlLabels)?0:3)})`);let D=a.node().getBBox();return e.height=D.height,e.offsetX=0,e.offsetY=$.height-e.padding/2,e.labelBBox=$,e.intersect=function(t){return p(e,t)},{cluster:y,labelBBox:$}},"roundedWithTitle"),M=(0,s.eW)(async(t,e)=>{let a;s.cM.info("Creating subgraph rect for ",e.id,e);let r=(0,s.nV)(),{themeVariables:i,handDrawnSeed:c}=r,{clusterBkg:d,clusterBorder:g}=i,{labelStyles:y,nodeStyles:u,borderStyles:m,backgroundStyles:x}=b(e),w=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),k=(0,s.ku)(r.flowchart.htmlLabels),S=w.insert("g").attr("class","cluster-label "),P=await (0,n.rw)(S,e.label,{style:e.labelStyle,useHtmlLabels:k,isNode:!0,width:e.width}),M=P.getBBox();if((0,s.ku)(r.flowchart.htmlLabels)){let t=P.children[0],e=(0,o.Ys)(P);M=t.getBoundingClientRect(),e.attr("width",M.width),e.attr("height",M.height)}let C=e.width<=M.width+e.padding?M.width+e.padding:e.width;e.width<=M.width+e.padding?e.diff=(C-e.width)/2-e.padding:e.diff=-e.padding;let W=e.height,v=e.x-C/2,D=e.y-W/2;if(s.cM.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=h.Z.svg(w),r=$(e,{roughness:.7,fill:d,stroke:g,fillWeight:4,seed:c}),l=t.path(f(v,D,C,W,e.rx),r);(a=w.insert(()=>(s.cM.debug("Rough node insert CXC",l),l),":first-child")).select("path:nth-child(2)").attr("style",m.join(";")),a.select("path").attr("style",x.join(";").replace("fill","stroke"))}else(a=w.insert("rect",":first-child")).attr("style",u).attr("rx",e.rx).attr("ry",e.ry).attr("x",v).attr("y",D).attr("width",C).attr("height",W);let{subGraphTitleTopMargin:R}=(0,l.L)(r);if(S.attr("transform",`translate(${e.x-M.width/2}, ${e.y-e.height/2+R})`),y){let t=S.select("span");t&&t.attr("style",y)}let N=a.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=M.height-e.padding/2,e.intersect=function(t){return p(e,t)},{cluster:w,labelBBox:M}},"kanbanSection"),C={rect:k,squareRect:k,roundedWithTitle:P,noteGroup:S,divider:(0,s.eW)((t,e)=>{let a;let r=(0,s.nV)(),{themeVariables:l,handDrawnSeed:n}=r,{nodeBorder:i}=l,o=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),c=o.insert("g",":first-child"),d=0*e.padding,g=e.width+d;e.diff=-e.padding;let y=e.height+d,u=e.x-g/2,f=e.y-y/2;if(e.width=g,"handDrawn"===e.look){let t=h.Z.svg(o),e=t.rectangle(u,f,g,y,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:n});a=o.insert(()=>e,":first-child")}else(a=c.insert("rect",":first-child")).attr("class","divider").attr("x",u).attr("y",f).attr("width",g).attr("height",y).attr("data-look",e.look);let m=a.node().getBBox();return e.height=m.height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return p(e,t)},{cluster:o,labelBBox:{}}},"divider"),kanbanSection:M},W=new Map,v=(0,s.eW)(async(t,e)=>{let a=e.shape||"rect",r=await C[a](t,e);return W.set(e.id,r),r},"insertCluster"),D=(0,s.eW)(()=>{W=new Map},"clear");function intersectNode(t,e){return t.intersect(e)}function intersectEllipse(t,e,a,r){var l=t.x,n=t.y,i=l-r.x,s=n-r.y,o=Math.sqrt(e*e*s*s+a*a*i*i),h=Math.abs(e*a*i/o);r.x<l&&(h=-h);var c=Math.abs(e*a*s/o);return r.y<n&&(c=-c),{x:l+h,y:n+c}}function intersectCircle(t,e,a){return intersectEllipse(t,e,e,a)}function intersectLine(t,e,a,r){var l,n,i,s,o,h,c,d,g,y,p,u,f;if(l=e.y-t.y,i=t.x-e.x,o=e.x*t.y-t.x*e.y,g=l*a.x+i*a.y+o,y=l*r.x+i*r.y+o,!(0!==g&&0!==y&&sameSign(g,y))&&(n=r.y-a.y,s=a.x-r.x,h=r.x*a.y-a.x*r.y,c=n*t.x+s*t.y+h,d=n*e.x+s*e.y+h,!(0!==c&&0!==d&&sameSign(c,d))&&0!=(p=l*s-n*i)))return u=Math.abs(p/2),{x:(f=i*h-s*o)<0?(f-u)/p:(f+u)/p,y:(f=n*o-l*h)<0?(f-u)/p:(f+u)/p}}function sameSign(t,e){return t*e>0}function intersectPolygon(t,e,a){let r=t.x,l=t.y,n=[],i=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach(function(t){i=Math.min(i,t.x),s=Math.min(s,t.y)}):(i=Math.min(i,e.x),s=Math.min(s,e.y));let o=r-t.width/2-i,h=l-t.height/2-s;for(let r=0;r<e.length;r++){let l=e[r],i=e[r<e.length-1?r+1:0],s=intersectLine(t,a,{x:o+l.x,y:h+l.y},{x:o+i.x,y:h+i.y});s&&n.push(s)}return n.length?(n.length>1&&n.sort(function(t,e){let r=t.x-a.x,l=t.y-a.y,n=Math.sqrt(r*r+l*l),i=e.x-a.x,s=e.y-a.y,o=Math.sqrt(i*i+s*s);return n<o?-1:n===o?0:1}),n[0]):t}(0,s.eW)(intersectNode,"intersectNode"),(0,s.eW)(intersectEllipse,"intersectEllipse"),(0,s.eW)(intersectCircle,"intersectCircle"),(0,s.eW)(intersectLine,"intersectLine"),(0,s.eW)(sameSign,"sameSign"),(0,s.eW)(intersectPolygon,"intersectPolygon");var R={node:intersectNode,circle:intersectCircle,ellipse:intersectEllipse,polygon:intersectPolygon,rect:p};function anchor(t,e){let{labelStyles:a}=b(e);e.labelStyle=a;let r=y(e),l=r;r||(l="anchor");let n=t.insert("g").attr("class",l).attr("id",e.domId||e.id),{cssStyles:o}=e,c=h.Z.svg(n),d=$(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(d.roughness=0);let p=c.circle(0,0,2,d),u=n.insert(()=>p,":first-child");return u.attr("class","anchor").attr("style",(0,i.R7)(o)),g(e,u),e.intersect=function(t){return s.cM.info("Circle intersect",e,1,t),R.circle(e,1,t)},n}function generateArcPoints(t,e,a,r,l,n,i){let s=Math.atan2(r-e,a-t),o=Math.sqrt(((a-t)/2/l)**2+((r-e)/2/n)**2);if(o>1)throw Error("The given radii are too small to create an arc between the points.");let h=Math.sqrt(1-o**2),c=(t+a)/2+h*n*Math.sin(s)*(i?-1:1),d=(e+r)/2-h*l*Math.cos(s)*(i?-1:1),g=Math.atan2((e-d)/n,(t-c)/l),y=Math.atan2((r-d)/n,(a-c)/l)-g;i&&y<0&&(y+=2*Math.PI),!i&&y>0&&(y-=2*Math.PI);let p=[];for(let t=0;t<20;t++){let e=t/19,a=g+e*y,r=c+l*Math.cos(a),i=d+n*Math.sin(a);p.push({x:r,y:i})}return p}async function bowTieRect(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),i=n.width+e.padding+20,s=n.height+e.padding,o=s/2,d=o/(2.5+s/50),{cssStyles:p}=e,u=[{x:i/2,y:-s/2},{x:-i/2,y:-s/2},...generateArcPoints(-i/2,-s/2,-i/2,s/2,d,o,!1),{x:i/2,y:s/2},...generateArcPoints(i/2,s/2,i/2,-s/2,d,o,!0)],f=h.Z.svg(l),m=$(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=createPathFromPoints(u),w=f.path(x,m),k=l.insert(()=>w,":first-child");return k.attr("class","basic label-container"),p&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",p),r&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",r),k.attr("transform",`translate(${d/2}, 0)`),g(e,k),e.intersect=function(t){let a=R.polygon(e,u,t);return a},l}function insertPolygonShape(t,e,a,r){return t.insert("polygon",":first-child").attr("points",r.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+a/2+")")}async function card(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:i}=await c(t,e,y(e)),s=i.height+e.padding,o=i.width+e.padding+12,d=-s,p=[{x:12,y:d},{x:o,y:d},{x:o,y:0},{x:0,y:0},{x:0,y:d+12},{x:12,y:d}],{cssStyles:u}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=createPathFromPoints(p),i=t.path(l,r);a=n.insert(()=>i,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),u&&a.attr("style",u)}else a=insertPolygonShape(n,o,s,p);return l&&a.attr("style",l),g(e,a),e.intersect=function(t){return R.polygon(e,p,t)},n}function choice(t,e){let{nodeStyles:a}=b(e);e.label="";let r=t.insert("g").attr("class",y(e)).attr("id",e.domId??e.id),{cssStyles:l}=e,n=Math.max(28,e.width??0),i=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],s=h.Z.svg(r),o=$(e,{});"handDrawn"!==e.look&&(o.roughness=0,o.fillStyle="solid");let c=createPathFromPoints(i),d=s.path(c,o),g=r.insert(()=>d,":first-child");return l&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",l),a&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",a),e.width=28,e.height=28,e.intersect=function(t){return R.polygon(e,i,t)},r}async function circle(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:o,halfPadding:d}=await c(t,e,y(e)),p=o.width/2+d,{cssStyles:u}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=t.circle(0,0,2*p,r);(a=n.insert(()=>l,":first-child")).attr("class","basic label-container").attr("style",(0,i.R7)(u))}else a=n.insert("circle",":first-child").attr("class","basic label-container").attr("style",l).attr("r",p).attr("cx",0).attr("cy",0);return g(e,a),e.intersect=function(t){return s.cM.info("Circle intersect",e,p,t),R.circle(e,p,t)},n}function createLine(t){let e=Math.cos(Math.PI/4),a=Math.sin(Math.PI/4),r=2*t,l={x:r/2*e,y:r/2*a},n={x:-(r/2)*e,y:r/2*a},i={x:-(r/2)*e,y:-(r/2)*a},s={x:r/2*e,y:-(r/2)*a};return`M ${n.x},${n.y} L ${s.x},${s.y}
                   M ${l.x},${l.y} L ${i.x},${i.y}`}function crossedCircle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a,e.label="";let l=t.insert("g").attr("class",y(e)).attr("id",e.domId??e.id),n=Math.max(30,e?.width??0),{cssStyles:i}=e,o=h.Z.svg(l),c=$(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let d=o.circle(0,0,2*n,c),p=createLine(n),u=o.path(p,c),f=l.insert(()=>d,":first-child");return f.insert(()=>u),i&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",i),r&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",r),g(e,f),e.intersect=function(t){s.cM.info("crossedCircle intersect",e,{radius:n,point:t});let a=R.circle(e,n,t);return a},l}function generateCirclePoints2(t,e,a,r=100,l=0,n=180){let i=[],s=l*Math.PI/180,o=(n*Math.PI/180-s)/(r-1);for(let l=0;l<r;l++){let r=s+l*o,n=t+a*Math.cos(r),h=e+a*Math.sin(r);i.push({x:-n,y:-h})}return i}async function curlyBraceLeft(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=n.width+(e.padding??0),o=n.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:p}=e,u=[...generateCirclePoints2(s/2,-o/2,d,30,-90,0),{x:-s/2-d,y:d},...generateCirclePoints2(s/2+2*d,-d,d,20,-180,-270),...generateCirclePoints2(s/2+2*d,d,d,20,-90,-180),{x:-s/2-d,y:-o/2},...generateCirclePoints2(s/2,o/2,d,20,0,90)],f=[{x:s/2,y:-o/2-d},{x:-s/2,y:-o/2-d},...generateCirclePoints2(s/2,-o/2,d,20,-90,0),{x:-s/2-d,y:-d},...generateCirclePoints2(s/2+.1*s,-d,d,20,-180,-270),...generateCirclePoints2(s/2+.1*s,d,d,20,-90,-180),{x:-s/2-d,y:o/2},...generateCirclePoints2(s/2,o/2,d,20,0,90),{x:-s/2,y:o/2+d},{x:s/2,y:o/2+d}],m=h.Z.svg(l),x=$(e,{fill:"none"});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=createPathFromPoints(u),k=w.replace("Z",""),S=m.path(k,x),P=createPathFromPoints(f),M=m.path(P,{...x}),C=l.insert("g",":first-child");return C.insert(()=>M,":first-child").attr("stroke-opacity",0),C.insert(()=>S,":first-child"),C.attr("class","text"),p&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",p),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${d}, 0)`),i.attr("transform",`translate(${-s/2+d-(n.x-(n.left??0))},${-o/2+(e.padding??0)/2-(n.y-(n.top??0))})`),g(e,C),e.intersect=function(t){let a=R.polygon(e,f,t);return a},l}function generateCirclePoints3(t,e,a,r=100,l=0,n=180){let i=[],s=l*Math.PI/180,o=(n*Math.PI/180-s)/(r-1);for(let l=0;l<r;l++){let r=s+l*o,n=t+a*Math.cos(r),h=e+a*Math.sin(r);i.push({x:n,y:h})}return i}async function curlyBraceRight(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=n.width+(e.padding??0),o=n.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:p}=e,u=[...generateCirclePoints3(s/2,-o/2,d,20,-90,0),{x:s/2+d,y:-d},...generateCirclePoints3(s/2+2*d,-d,d,20,-180,-270),...generateCirclePoints3(s/2+2*d,d,d,20,-90,-180),{x:s/2+d,y:o/2},...generateCirclePoints3(s/2,o/2,d,20,0,90)],f=[{x:-s/2,y:-o/2-d},{x:s/2,y:-o/2-d},...generateCirclePoints3(s/2,-o/2,d,20,-90,0),{x:s/2+d,y:-d},...generateCirclePoints3(s/2+2*d,-d,d,20,-180,-270),...generateCirclePoints3(s/2+2*d,d,d,20,-90,-180),{x:s/2+d,y:o/2},...generateCirclePoints3(s/2,o/2,d,20,0,90),{x:s/2,y:o/2+d},{x:-s/2,y:o/2+d}],m=h.Z.svg(l),x=$(e,{fill:"none"});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=createPathFromPoints(u),k=w.replace("Z",""),S=m.path(k,x),P=createPathFromPoints(f),M=m.path(P,{...x}),C=l.insert("g",":first-child");return C.insert(()=>M,":first-child").attr("stroke-opacity",0),C.insert(()=>S,":first-child"),C.attr("class","text"),p&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",p),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${-d}, 0)`),i.attr("transform",`translate(${-s/2+(e.padding??0)/2-(n.x-(n.left??0))},${-o/2+(e.padding??0)/2-(n.y-(n.top??0))})`),g(e,C),e.intersect=function(t){let a=R.polygon(e,f,t);return a},l}function generateCirclePoints4(t,e,a,r=100,l=0,n=180){let i=[],s=l*Math.PI/180,o=(n*Math.PI/180-s)/(r-1);for(let l=0;l<r;l++){let r=s+l*o,n=t+a*Math.cos(r),h=e+a*Math.sin(r);i.push({x:-n,y:-h})}return i}async function curlyBraces(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=n.width+(e.padding??0),o=n.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:p}=e,u=[...generateCirclePoints4(s/2,-o/2,d,30,-90,0),{x:-s/2-d,y:d},...generateCirclePoints4(s/2+2*d,-d,d,20,-180,-270),...generateCirclePoints4(s/2+2*d,d,d,20,-90,-180),{x:-s/2-d,y:-o/2},...generateCirclePoints4(s/2,o/2,d,20,0,90)],f=[...generateCirclePoints4(-s/2+d+d/2,-o/2,d,20,-90,-180),{x:s/2-d/2,y:d},...generateCirclePoints4(-s/2-d/2,-d,d,20,0,90),...generateCirclePoints4(-s/2-d/2,d,d,20,-90,0),{x:s/2-d/2,y:-d},...generateCirclePoints4(-s/2+d+d/2,o/2,d,30,-180,-270)],m=[{x:s/2,y:-o/2-d},{x:-s/2,y:-o/2-d},...generateCirclePoints4(s/2,-o/2,d,20,-90,0),{x:-s/2-d,y:-d},...generateCirclePoints4(s/2+2*d,-d,d,20,-180,-270),...generateCirclePoints4(s/2+2*d,d,d,20,-90,-180),{x:-s/2-d,y:o/2},...generateCirclePoints4(s/2,o/2,d,20,0,90),{x:-s/2,y:o/2+d},{x:s/2-d-d/2,y:o/2+d},...generateCirclePoints4(-s/2+d+d/2,-o/2,d,20,-90,-180),{x:s/2-d/2,y:d},...generateCirclePoints4(-s/2-d/2,-d,d,20,0,90),...generateCirclePoints4(-s/2-d/2,d,d,20,-90,0),{x:s/2-d/2,y:-d},...generateCirclePoints4(-s/2+d+d/2,o/2,d,30,-180,-270)],x=h.Z.svg(l),w=$(e,{fill:"none"});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=createPathFromPoints(u),S=k.replace("Z",""),P=x.path(S,w),M=createPathFromPoints(f),C=M.replace("Z",""),W=x.path(C,w),v=createPathFromPoints(m),D=x.path(v,{...w}),N=l.insert("g",":first-child");return N.insert(()=>D,":first-child").attr("stroke-opacity",0),N.insert(()=>P,":first-child"),N.insert(()=>W,":first-child"),N.attr("class","text"),p&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",p),r&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",r),N.attr("transform",`translate(${d-d/4}, 0)`),i.attr("transform",`translate(${-s/2+(e.padding??0)/2-(n.x-(n.left??0))},${-o/2+(e.padding??0)/2-(n.y-(n.top??0))})`),g(e,N),e.intersect=function(t){let a=R.polygon(e,m,t);return a},l}async function curvedTrapezoid(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),i=Math.max(80,(n.width+(e.padding??0)*2)*1.25,e?.width??0),s=Math.max(20,n.height+(e.padding??0)*2,e?.height??0),o=s/2,{cssStyles:d}=e,p=h.Z.svg(l),u=$(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let f=i-o,m=s/4,x=[{x:f,y:0},{x:m,y:0},{x:0,y:s/2},{x:m,y:s},{x:f,y:s},...generateCirclePoints(-f,-s/2,o,50,270,90)],w=createPathFromPoints(x),k=p.path(w,u),S=l.insert(()=>k,":first-child");return S.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",d),r&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",r),S.attr("transform",`translate(${-i/2}, ${-s/2})`),g(e,S),e.intersect=function(t){let a=R.polygon(e,x,t);return a},l}(0,s.eW)(anchor,"anchor"),(0,s.eW)(generateArcPoints,"generateArcPoints"),(0,s.eW)(bowTieRect,"bowTieRect"),(0,s.eW)(insertPolygonShape,"insertPolygonShape"),(0,s.eW)(card,"card"),(0,s.eW)(choice,"choice"),(0,s.eW)(circle,"circle"),(0,s.eW)(createLine,"createLine"),(0,s.eW)(crossedCircle,"crossedCircle"),(0,s.eW)(generateCirclePoints2,"generateCirclePoints"),(0,s.eW)(curlyBraceLeft,"curlyBraceLeft"),(0,s.eW)(generateCirclePoints3,"generateCirclePoints"),(0,s.eW)(curlyBraceRight,"curlyBraceRight"),(0,s.eW)(generateCirclePoints4,"generateCirclePoints"),(0,s.eW)(curlyBraces,"curlyBraces"),(0,s.eW)(curvedTrapezoid,"curvedTrapezoid");var N=(0,s.eW)((t,e,a,r,l,n)=>`M${t},${e+n} a${l},${n} 0,0,0 ${a},0 a${l},${n} 0,0,0 ${-a},0 l0,${r} a${l},${n} 0,0,0 ${a},0 l0,${-r}`,"createCylinderPathD"),B=(0,s.eW)((t,e,a,r,l,n)=>`M${t},${e+n} M${t+a},${e+n} a${l},${n} 0,0,0 ${-a},0 l0,${r} a${l},${n} 0,0,0 ${a},0 l0,${-r}`,"createOuterCylinderPathD"),A=(0,s.eW)((t,e,a,r,l,n)=>`M${t-a/2},${-r/2} a${l},${n} 0,0,0 ${a},0`,"createInnerCylinderPathD");async function cylinder(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:s,label:o}=await c(t,e,y(e)),d=Math.max(s.width+e.padding,e.width??0),p=d/2,u=p/(2.5+d/50),f=Math.max(s.height+u+e.padding,e.height??0),{cssStyles:m}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=B(0,0,d,f,p,u),l=A(0,u,d,f,p,u),i=t.path(r,$(e,{})),s=t.path(l,$(e,{fill:"none"}));a=n.insert(()=>s,":first-child"),(a=n.insert(()=>i,":first-child")).attr("class","basic label-container"),m&&a.attr("style",m)}else{let t=N(0,0,d,f,p,u);a=n.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,i.R7)(m)).attr("style",l)}return a.attr("label-offset-y",u),a.attr("transform",`translate(${-d/2}, ${-(f/2+u)})`),g(e,a),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(t){let a=R.rect(e,t),r=a.x-(e.x??0);if(0!=p&&(Math.abs(r)<(e.width??0)/2||Math.abs(r)==(e.width??0)/2&&Math.abs(a.y-(e.y??0))>(e.height??0)/2-u)){let l=u*u*(1-r*r/(p*p));l>0&&(l=Math.sqrt(l)),l=u-l,t.y-(e.y??0)>0&&(l=-l),a.y+=l}return a},n}async function dividedRectangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=n.width+e.padding,o=n.height+e.padding,d=.2*o,p=-s/2,u=-o/2-d/2,{cssStyles:f}=e,m=h.Z.svg(l),x=$(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=[{x:p,y:u+d},{x:-p,y:u+d},{x:-p,y:-u},{x:p,y:-u},{x:p,y:u},{x:-p,y:u},{x:-p,y:u+d}],k=m.polygon(w.map(t=>[t.x,t.y]),x),S=l.insert(()=>k,":first-child");return S.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",r),i.attr("transform",`translate(${p+(e.padding??0)/2-(n.x-(n.left??0))}, ${u+d+(e.padding??0)/2-(n.y-(n.top??0))})`),g(e,S),e.intersect=function(t){let a=R.rect(e,t);return a},l}async function doublecircle(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:o,halfPadding:d}=await c(t,e,y(e)),p=o.width/2+d+5,u=o.width/2+d,{cssStyles:f}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{roughness:.2,strokeWidth:2.5}),l=$(e,{roughness:.2,strokeWidth:1.5}),s=t.circle(0,0,2*p,r),o=t.circle(0,0,2*u,l);(a=n.insert("g",":first-child")).attr("class",(0,i.R7)(e.cssClasses)).attr("style",(0,i.R7)(f)),a.node()?.appendChild(s),a.node()?.appendChild(o)}else{a=n.insert("g",":first-child");let t=a.insert("circle",":first-child"),e=a.insert("circle");a.attr("class","basic label-container").attr("style",l),t.attr("class","outer-circle").attr("style",l).attr("r",p).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",l).attr("r",u).attr("cx",0).attr("cy",0)}return g(e,a),e.intersect=function(t){return s.cM.info("DoubleCircle intersect",e,p,t),R.circle(e,p,t)},n}function filledCircle(t,e,{config:{themeVariables:a}}){let{labelStyles:r,nodeStyles:l}=b(e);e.label="",e.labelStyle=r;let n=t.insert("g").attr("class",y(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,o=h.Z.svg(n),{nodeBorder:c}=a,d=$(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(d.roughness=0);let p=o.circle(0,0,14,d),u=n.insert(()=>p,":first-child");return u.selectAll("path").attr("style",`fill: ${c} !important;`),i&&i.length>0&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",i),l&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",l),g(e,u),e.intersect=function(t){s.cM.info("filledCircle intersect",e,{radius:7,point:t});let a=R.circle(e,7,t);return a},n}async function flippedTriangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),o=n.width+(e.padding??0),d=o+n.height,p=o+n.height,u=[{x:0,y:-d},{x:p,y:-d},{x:p/2,y:0}],{cssStyles:f}=e,m=h.Z.svg(l),x=$(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=createPathFromPoints(u),k=m.path(w,x),S=l.insert(()=>k,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return f&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",f),r&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",r),e.width=o,e.height=d,g(e,S),i.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${-d/2+(e.padding??0)/2+(n.y-(n.top??0))})`),e.intersect=function(t){return s.cM.info("Triangle intersect",e,u,t),R.polygon(e,u,t)},l}function forkJoin(t,e,{dir:a,config:{state:r,themeVariables:l}}){let{nodeStyles:n}=b(e);e.label="";let i=t.insert("g").attr("class",y(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(70,e?.width??0),c=Math.max(10,e?.height??0);"LR"===a&&(o=Math.max(10,e?.width??0),c=Math.max(70,e?.height??0));let d=-1*o/2,p=-1*c/2,u=h.Z.svg(i),f=$(e,{stroke:l.lineColor,fill:l.lineColor});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let m=u.rectangle(d,p,o,c,f),x=i.insert(()=>m,":first-child");s&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",s),n&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",n),g(e,x);let w=r?.padding??0;return e.width&&e.height&&(e.width+=w/2||0,e.height+=w/2||0),e.intersect=function(t){return R.rect(e,t)},i}async function halfRoundedRectangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),i=Math.max(80,n.width+(e.padding??0)*2,e?.width??0),o=Math.max(50,n.height+(e.padding??0)*2,e?.height??0),d=o/2,{cssStyles:p}=e,u=h.Z.svg(l),f=$(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let m=[{x:-i/2,y:-o/2},{x:i/2-d,y:-o/2},...generateCirclePoints(-i/2+d,0,d,50,90,270),{x:i/2-d,y:o/2},{x:-i/2,y:o/2}],x=createPathFromPoints(m),w=u.path(x,f),k=l.insert(()=>w,":first-child");return k.attr("class","basic label-container"),p&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",p),r&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",r),g(e,k),e.intersect=function(t){s.cM.info("Pill intersect",e,{radius:d,point:t});let a=R.polygon(e,m,t);return a},l}(0,s.eW)(cylinder,"cylinder"),(0,s.eW)(dividedRectangle,"dividedRectangle"),(0,s.eW)(doublecircle,"doublecircle"),(0,s.eW)(filledCircle,"filledCircle"),(0,s.eW)(flippedTriangle,"flippedTriangle"),(0,s.eW)(forkJoin,"forkJoin"),(0,s.eW)(halfRoundedRectangle,"halfRoundedRectangle");var L=(0,s.eW)((t,e,a,r,l)=>`M${t+l},${e} L${t+a-l},${e} L${t+a},${e-r/2} L${t+a-l},${e-r} L${t+l},${e-r} L${t},${e-r/2} Z`,"createHexagonPathD");async function hexagon(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:i}=await c(t,e,y(e)),s=i.height+e.padding,o=s/4,d=i.width+2*o+e.padding,p=[{x:o,y:0},{x:d-o,y:0},{x:d,y:-s/2},{x:d-o,y:-s},{x:o,y:-s},{x:0,y:-s/2}],{cssStyles:u}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=L(0,0,d,s,o),i=t.path(l,r);a=n.insert(()=>i,":first-child").attr("transform",`translate(${-d/2}, ${s/2})`),u&&a.attr("style",u)}else a=insertPolygonShape(n,d,s,p);return l&&a.attr("style",l),e.width=d,e.height=s,g(e,a),e.intersect=function(t){return R.polygon(e,p,t)},n}async function hourglass(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.label="",e.labelStyle=a;let{shapeSvg:l}=await c(t,e,y(e)),n=Math.max(30,e?.width??0),i=Math.max(30,e?.height??0),{cssStyles:o}=e,d=h.Z.svg(l),p=$(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let u=[{x:0,y:0},{x:n,y:0},{x:0,y:i},{x:n,y:i}],f=createPathFromPoints(u),m=d.path(f,p),x=l.insert(()=>m,":first-child");return x.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(${-n/2}, ${-i/2})`),g(e,x),e.intersect=function(t){s.cM.info("Pill intersect",e,{points:u});let a=R.polygon(e,u,t);return a},l}async function icon(t,e,{config:{themeVariables:a,flowchart:l}}){let{labelStyles:n}=b(e);e.labelStyle=n;let i=e.assetHeight??48,o=e.assetWidth??48,d=Math.max(i,o),y=l?.wrappingWidth;e.width=Math.max(d,y??0);let{shapeSvg:p,bbox:u,label:f}=await c(t,e,"icon-shape default"),m="t"===e.pos,{nodeBorder:w}=a,{stylesMap:k}=x(e),S=-d/2,P=-d/2,M=e.label?8:0,C=h.Z.svg(p),W=$(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(W.roughness=0,W.fillStyle="solid");let v=C.rectangle(S,P,d,d,W),D=Math.max(d,u.width),N=d+u.height+M,B=C.rectangle(-D/2,-N/2,D,N,{...W,fill:"transparent",stroke:"none"}),A=p.insert(()=>v,":first-child"),L=p.insert(()=>B);if(e.icon){let t=p.append("g");t.html(`<g>${await (0,r.s4)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),l=a.width,n=a.height,i=a.x,s=a.y;t.attr("transform",`translate(${-l/2-i},${m?u.height/2+M/2-n/2-s:-u.height/2-M/2-n/2-s})`),t.attr("style",`color: ${k.get("stroke")??w};`)}return f.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-N/2:N/2-u.height})`),A.attr("transform",`translate(0,${m?u.height/2+M/2:-u.height/2-M/2})`),g(e,L),e.intersect=function(t){if(s.cM.info("iconSquare intersect",e,t),!e.label)return R.rect(e,t);let a=e.x??0,r=e.y??0,l=e.height??0,n=[];n=m?[{x:a-u.width/2,y:r-l/2},{x:a+u.width/2,y:r-l/2},{x:a+u.width/2,y:r-l/2+u.height+M},{x:a+d/2,y:r-l/2+u.height+M},{x:a+d/2,y:r+l/2},{x:a-d/2,y:r+l/2},{x:a-d/2,y:r-l/2+u.height+M},{x:a-u.width/2,y:r-l/2+u.height+M}]:[{x:a-d/2,y:r-l/2},{x:a+d/2,y:r-l/2},{x:a+d/2,y:r-l/2+d},{x:a+u.width/2,y:r-l/2+d},{x:a+u.width/2/2,y:r+l/2},{x:a-u.width/2,y:r+l/2},{x:a-u.width/2,y:r-l/2+d},{x:a-d/2,y:r-l/2+d}];let i=R.polygon(e,n,t);return i},p}async function iconCircle(t,e,{config:{themeVariables:a,flowchart:l}}){let{labelStyles:n}=b(e);e.labelStyle=n;let i=e.assetHeight??48,o=e.assetWidth??48,d=Math.max(i,o),y=l?.wrappingWidth;e.width=Math.max(d,y??0);let{shapeSvg:p,bbox:u,label:f}=await c(t,e,"icon-shape default"),m=e.label?8:0,w="t"===e.pos,{nodeBorder:k,mainBkg:S}=a,{stylesMap:P}=x(e),M=h.Z.svg(p),C=$(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");let W=P.get("fill");C.stroke=W??S;let v=p.append("g");e.icon&&v.html(`<g>${await (0,r.s4)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);let D=v.node().getBBox(),N=D.width,B=D.height,A=D.x,L=D.y,T=Math.max(N,B)*Math.SQRT2+40,Z=M.circle(0,0,T,C),I=Math.max(T,u.width),F=T+u.height+m,E=M.rectangle(-I/2,-F/2,I,F,{...C,fill:"transparent",stroke:"none"}),H=p.insert(()=>Z,":first-child"),_=p.insert(()=>E);return v.attr("transform",`translate(${-N/2-A},${w?u.height/2+m/2-B/2-L:-u.height/2-m/2-B/2-L})`),v.attr("style",`color: ${P.get("stroke")??k};`),f.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${w?-F/2:F/2-u.height})`),H.attr("transform",`translate(0,${w?u.height/2+m/2:-u.height/2-m/2})`),g(e,_),e.intersect=function(t){s.cM.info("iconSquare intersect",e,t);let a=R.rect(e,t);return a},p}async function iconRounded(t,e,{config:{themeVariables:a,flowchart:l}}){let{labelStyles:n}=b(e);e.labelStyle=n;let i=e.assetHeight??48,o=e.assetWidth??48,d=Math.max(i,o),y=l?.wrappingWidth;e.width=Math.max(d,y??0);let{shapeSvg:p,bbox:u,halfPadding:m,label:w}=await c(t,e,"icon-shape default"),k="t"===e.pos,S=d+2*m,P=d+2*m,{nodeBorder:M,mainBkg:C}=a,{stylesMap:W}=x(e),v=-P/2,D=-S/2,N=e.label?8:0,B=h.Z.svg(p),A=$(e,{});"handDrawn"!==e.look&&(A.roughness=0,A.fillStyle="solid");let L=W.get("fill");A.stroke=L??C;let T=B.path(f(v,D,P,S,5),A),Z=Math.max(P,u.width),I=S+u.height+N,F=B.rectangle(-Z/2,-I/2,Z,I,{...A,fill:"transparent",stroke:"none"}),E=p.insert(()=>T,":first-child").attr("class","icon-shape2"),H=p.insert(()=>F);if(e.icon){let t=p.append("g");t.html(`<g>${await (0,r.s4)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),l=a.width,n=a.height,i=a.x,s=a.y;t.attr("transform",`translate(${-l/2-i},${k?u.height/2+N/2-n/2-s:-u.height/2-N/2-n/2-s})`),t.attr("style",`color: ${W.get("stroke")??M};`)}return w.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${k?-I/2:I/2-u.height})`),E.attr("transform",`translate(0,${k?u.height/2+N/2:-u.height/2-N/2})`),g(e,H),e.intersect=function(t){if(s.cM.info("iconSquare intersect",e,t),!e.label)return R.rect(e,t);let a=e.x??0,r=e.y??0,l=e.height??0,n=[];n=k?[{x:a-u.width/2,y:r-l/2},{x:a+u.width/2,y:r-l/2},{x:a+u.width/2,y:r-l/2+u.height+N},{x:a+P/2,y:r-l/2+u.height+N},{x:a+P/2,y:r+l/2},{x:a-P/2,y:r+l/2},{x:a-P/2,y:r-l/2+u.height+N},{x:a-u.width/2,y:r-l/2+u.height+N}]:[{x:a-P/2,y:r-l/2},{x:a+P/2,y:r-l/2},{x:a+P/2,y:r-l/2+S},{x:a+u.width/2,y:r-l/2+S},{x:a+u.width/2/2,y:r+l/2},{x:a-u.width/2,y:r+l/2},{x:a-u.width/2,y:r-l/2+S},{x:a-P/2,y:r-l/2+S}];let i=R.polygon(e,n,t);return i},p}async function iconSquare(t,e,{config:{themeVariables:a,flowchart:l}}){let{labelStyles:n}=b(e);e.labelStyle=n;let i=e.assetHeight??48,o=e.assetWidth??48,d=Math.max(i,o),y=l?.wrappingWidth;e.width=Math.max(d,y??0);let{shapeSvg:p,bbox:u,halfPadding:m,label:w}=await c(t,e,"icon-shape default"),k="t"===e.pos,S=d+2*m,P=d+2*m,{nodeBorder:M,mainBkg:C}=a,{stylesMap:W}=x(e),v=-P/2,D=-S/2,N=e.label?8:0,B=h.Z.svg(p),A=$(e,{});"handDrawn"!==e.look&&(A.roughness=0,A.fillStyle="solid");let L=W.get("fill");A.stroke=L??C;let T=B.path(f(v,D,P,S,.1),A),Z=Math.max(P,u.width),I=S+u.height+N,F=B.rectangle(-Z/2,-I/2,Z,I,{...A,fill:"transparent",stroke:"none"}),E=p.insert(()=>T,":first-child"),H=p.insert(()=>F);if(e.icon){let t=p.append("g");t.html(`<g>${await (0,r.s4)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),l=a.width,n=a.height,i=a.x,s=a.y;t.attr("transform",`translate(${-l/2-i},${k?u.height/2+N/2-n/2-s:-u.height/2-N/2-n/2-s})`),t.attr("style",`color: ${W.get("stroke")??M};`)}return w.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${k?-I/2:I/2-u.height})`),E.attr("transform",`translate(0,${k?u.height/2+N/2:-u.height/2-N/2})`),g(e,H),e.intersect=function(t){if(s.cM.info("iconSquare intersect",e,t),!e.label)return R.rect(e,t);let a=e.x??0,r=e.y??0,l=e.height??0,n=[];n=k?[{x:a-u.width/2,y:r-l/2},{x:a+u.width/2,y:r-l/2},{x:a+u.width/2,y:r-l/2+u.height+N},{x:a+P/2,y:r-l/2+u.height+N},{x:a+P/2,y:r+l/2},{x:a-P/2,y:r+l/2},{x:a-P/2,y:r-l/2+u.height+N},{x:a-u.width/2,y:r-l/2+u.height+N}]:[{x:a-P/2,y:r-l/2},{x:a+P/2,y:r-l/2},{x:a+P/2,y:r-l/2+S},{x:a+u.width/2,y:r-l/2+S},{x:a+u.width/2/2,y:r+l/2},{x:a-u.width/2,y:r+l/2},{x:a-u.width/2,y:r-l/2+S},{x:a-P/2,y:r-l/2+S}];let i=R.polygon(e,n,t);return i},p}async function imageSquare(t,e,{config:{flowchart:a}}){let r=new Image;r.src=e?.img??"",await r.decode();let l=Number(r.naturalWidth.toString().replace("px","")),n=Number(r.naturalHeight.toString().replace("px",""));e.imageAspectRatio=l/n;let{labelStyles:i}=b(e);e.labelStyle=i;let o=a?.wrappingWidth;e.defaultWidth=a?.wrappingWidth;let d=Math.max(e.label?o??0:0,e?.assetWidth??l),y="on"===e.constraint&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:d,p="on"===e.constraint?y/e.imageAspectRatio:e?.assetHeight??n;e.width=Math.max(y,o??0);let{shapeSvg:u,bbox:f,label:m}=await c(t,e,"image-shape default"),x="t"===e.pos,w=-y/2,k=-p/2,S=e.label?8:0,P=h.Z.svg(u),M=$(e,{});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let C=P.rectangle(w,k,y,p,M),W=Math.max(y,f.width),v=p+f.height+S,D=P.rectangle(-W/2,-v/2,W,v,{...M,fill:"none",stroke:"none"}),N=u.insert(()=>C,":first-child"),B=u.insert(()=>D);if(e.img){let t=u.append("image");t.attr("href",e.img),t.attr("width",y),t.attr("height",p),t.attr("preserveAspectRatio","none"),t.attr("transform",`translate(${-y/2},${x?v/2-p:-v/2})`)}return m.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${x?-p/2-f.height/2-S/2:p/2-f.height/2+S/2})`),N.attr("transform",`translate(0,${x?f.height/2+S/2:-f.height/2-S/2})`),g(e,B),e.intersect=function(t){if(s.cM.info("iconSquare intersect",e,t),!e.label)return R.rect(e,t);let a=e.x??0,r=e.y??0,l=e.height??0,n=[];n=x?[{x:a-f.width/2,y:r-l/2},{x:a+f.width/2,y:r-l/2},{x:a+f.width/2,y:r-l/2+f.height+S},{x:a+y/2,y:r-l/2+f.height+S},{x:a+y/2,y:r+l/2},{x:a-y/2,y:r+l/2},{x:a-y/2,y:r-l/2+f.height+S},{x:a-f.width/2,y:r-l/2+f.height+S}]:[{x:a-y/2,y:r-l/2},{x:a+y/2,y:r-l/2},{x:a+y/2,y:r-l/2+p},{x:a+f.width/2,y:r-l/2+p},{x:a+f.width/2/2,y:r+l/2},{x:a-f.width/2,y:r+l/2},{x:a-f.width/2,y:r-l/2+p},{x:a-y/2,y:r-l/2+p}];let i=R.polygon(e,n,t);return i},u}async function inv_trapezoid(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:i}=await c(t,e,y(e)),s=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=[{x:0,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:-3*o/6,y:-o}],{cssStyles:p}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=createPathFromPoints(d),i=t.path(l,r);a=n.insert(()=>i,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),p&&a.attr("style",p)}else a=insertPolygonShape(n,s,o,d);return l&&a.attr("style",l),e.width=s,e.height=o,g(e,a),e.intersect=function(t){return R.polygon(e,d,t)},n}async function drawRect(t,e,a){let r;let{labelStyles:l,nodeStyles:n}=b(e);e.labelStyle=l;let{shapeSvg:s,bbox:o}=await c(t,e,y(e)),d=Math.max(o.width+2*a.labelPaddingX,e?.width||0),p=Math.max(o.height+2*a.labelPaddingY,e?.height||0),u=-d/2,m=-p/2,{rx:x,ry:w}=e,{cssStyles:k}=e;if(a?.rx&&a.ry&&(x=a.rx,w=a.ry),"handDrawn"===e.look){let t=h.Z.svg(s),a=$(e,{}),l=x||w?t.path(f(u,m,d,p,x||0),a):t.rectangle(u,m,d,p,a);(r=s.insert(()=>l,":first-child")).attr("class","basic label-container").attr("style",(0,i.R7)(k))}else(r=s.insert("rect",":first-child")).attr("class","basic label-container").attr("style",n).attr("rx",(0,i.R7)(x)).attr("ry",(0,i.R7)(w)).attr("x",u).attr("y",m).attr("width",d).attr("height",p);return g(e,r),e.intersect=function(t){return R.rect(e,t)},s}async function labelRect(t,e){let{shapeSvg:a,bbox:r,label:l}=await c(t,e,"label"),n=a.insert("rect",":first-child");return n.attr("width",.1).attr("height",.1),a.attr("class","label edgeLabel"),l.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),g(e,n),e.intersect=function(t){return R.rect(e,t)},a}async function lean_left(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:i}=await c(t,e,y(e)),s=Math.max(i.width+(e.padding??0),e?.width??0),o=Math.max(i.height+(e.padding??0),e?.height??0),d=[{x:0,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:-(3*o)/6,y:-o}],{cssStyles:p}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=createPathFromPoints(d),i=t.path(l,r);a=n.insert(()=>i,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),p&&a.attr("style",p)}else a=insertPolygonShape(n,s,o,d);return l&&a.attr("style",l),e.width=s,e.height=o,g(e,a),e.intersect=function(t){return R.polygon(e,d,t)},n}async function lean_right(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:i}=await c(t,e,y(e)),s=Math.max(i.width+(e.padding??0),e?.width??0),o=Math.max(i.height+(e.padding??0),e?.height??0),d=[{x:-3*o/6,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:0,y:-o}],{cssStyles:p}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=createPathFromPoints(d),i=t.path(l,r);a=n.insert(()=>i,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),p&&a.attr("style",p)}else a=insertPolygonShape(n,s,o,d);return l&&a.attr("style",l),e.width=s,e.height=o,g(e,a),e.intersect=function(t){return R.polygon(e,d,t)},n}function lightningBolt(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.label="",e.labelStyle=a;let l=t.insert("g").attr("class",y(e)).attr("id",e.domId??e.id),{cssStyles:n}=e,i=Math.max(35,e?.width??0),o=Math.max(35,e?.height??0),c=[{x:i,y:0},{x:0,y:o+3.5},{x:i-14,y:o+3.5},{x:0,y:2*o},{x:i,y:o-3.5},{x:14,y:o-3.5}],d=h.Z.svg(l),p=$(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let u=createPathFromPoints(c),f=d.path(u,p),m=l.insert(()=>f,":first-child");return n&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",n),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(-${i/2},${-o})`),g(e,m),e.intersect=function(t){s.cM.info("lightningBolt intersect",e,t);let a=R.polygon(e,c,t);return a},l}(0,s.eW)(hexagon,"hexagon"),(0,s.eW)(hourglass,"hourglass"),(0,s.eW)(icon,"icon"),(0,s.eW)(iconCircle,"iconCircle"),(0,s.eW)(iconRounded,"iconRounded"),(0,s.eW)(iconSquare,"iconSquare"),(0,s.eW)(imageSquare,"imageSquare"),(0,s.eW)(inv_trapezoid,"inv_trapezoid"),(0,s.eW)(drawRect,"drawRect"),(0,s.eW)(labelRect,"labelRect"),(0,s.eW)(lean_left,"lean_left"),(0,s.eW)(lean_right,"lean_right"),(0,s.eW)(lightningBolt,"lightningBolt");var T=(0,s.eW)((t,e,a,r,l,n,i)=>`M${t},${e+n} a${l},${n} 0,0,0 ${a},0 a${l},${n} 0,0,0 ${-a},0 l0,${r} a${l},${n} 0,0,0 ${a},0 l0,${-r} M${t},${e+n+i} a${l},${n} 0,0,0 ${a},0`,"createCylinderPathD"),Z=(0,s.eW)((t,e,a,r,l,n,i)=>`M${t},${e+n} M${t+a},${e+n} a${l},${n} 0,0,0 ${-a},0 l0,${r} a${l},${n} 0,0,0 ${a},0 l0,${-r} M${t},${e+n+i} a${l},${n} 0,0,0 ${a},0`,"createOuterCylinderPathD"),I=(0,s.eW)((t,e,a,r,l,n)=>`M${t-a/2},${-r/2} a${l},${n} 0,0,0 ${a},0`,"createInnerCylinderPathD");async function linedCylinder(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:s,label:o}=await c(t,e,y(e)),d=Math.max(s.width+(e.padding??0),e.width??0),p=d/2,u=p/(2.5+d/50),f=Math.max(s.height+u+(e.padding??0),e.height??0),m=.1*f,{cssStyles:x}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=Z(0,0,d,f,p,u,m),l=I(0,u,d,f,p,u),i=$(e,{}),s=t.path(r,i),o=t.path(l,i),c=n.insert(()=>o,":first-child");c.attr("class","line"),(a=n.insert(()=>s,":first-child")).attr("class","basic label-container"),x&&a.attr("style",x)}else{let t=T(0,0,d,f,p,u,m);a=n.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,i.R7)(x)).attr("style",l)}return a.attr("label-offset-y",u),a.attr("transform",`translate(${-d/2}, ${-(f/2+u)})`),g(e,a),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+u-(s.y-(s.top??0))})`),e.intersect=function(t){let a=R.rect(e,t),r=a.x-(e.x??0);if(0!=p&&(Math.abs(r)<(e.width??0)/2||Math.abs(r)==(e.width??0)/2&&Math.abs(a.y-(e.y??0))>(e.height??0)/2-u)){let l=u*u*(1-r*r/(p*p));l>0&&(l=Math.sqrt(l)),l=u-l,t.y-(e.y??0)>0&&(l=-l),a.y+=l}return a},n}async function linedWaveEdgedRect(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/4,p=o+d,{cssStyles:u}=e,f=h.Z.svg(l),m=$(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=[{x:-s/2-s/2*.1,y:-p/2},{x:-s/2-s/2*.1,y:p/2},...generateFullSineWavePoints(-s/2-s/2*.1,p/2,s/2+s/2*.1,p/2,d,.8),{x:s/2+s/2*.1,y:-p/2},{x:-s/2-s/2*.1,y:-p/2},{x:-s/2,y:-p/2},{x:-s/2,y:p/2*1.1},{x:-s/2,y:-p/2}],w=f.polygon(x.map(t=>[t.x,t.y]),m),k=l.insert(()=>w,":first-child");return k.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",u),r&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",r),k.attr("transform",`translate(0,${-d/2})`),i.attr("transform",`translate(${-s/2+(e.padding??0)+s/2*.1/2-(n.x-(n.left??0))},${-o/2+(e.padding??0)-d/2-(n.y-(n.top??0))})`),g(e,k),e.intersect=function(t){let a=R.polygon(e,x,t);return a},l}async function multiRect(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=-s/2,p=-o/2,{cssStyles:u}=e,f=h.Z.svg(l),m=$(e,{}),x=[{x:d-5,y:p+5},{x:d-5,y:p+o+5},{x:d+s-5,y:p+o+5},{x:d+s-5,y:p+o},{x:d+s,y:p+o},{x:d+s,y:p+o-5},{x:d+s+5,y:p+o-5},{x:d+s+5,y:p-5},{x:d+5,y:p-5},{x:d+5,y:p},{x:d,y:p},{x:d,y:p+5}],w=[{x:d,y:p+5},{x:d+s-5,y:p+5},{x:d+s-5,y:p+o},{x:d+s,y:p+o},{x:d+s,y:p},{x:d,y:p}];"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let k=createPathFromPoints(x),S=f.path(k,m),P=createPathFromPoints(w),M=f.path(P,{...m,fill:"none"}),C=l.insert(()=>M,":first-child");return C.insert(()=>S,":first-child"),C.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",u),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),i.attr("transform",`translate(${-(n.width/2)-5-(n.x-(n.left??0))}, ${-(n.height/2)+5-(n.y-(n.top??0))})`),g(e,C),e.intersect=function(t){let a=R.polygon(e,x,t);return a},l}async function multiWaveEdgedRectangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/4,p=o+d,u=-s/2,f=-p/2,{cssStyles:m}=e,x=generateFullSineWavePoints(u-5,f+p+5,u+s-5,f+p+5,d,.8),w=x?.[x.length-1],k=[{x:u-5,y:f+5},{x:u-5,y:f+p+5},...x,{x:u+s-5,y:w.y-5},{x:u+s,y:w.y-5},{x:u+s,y:w.y-10},{x:u+s+5,y:w.y-10},{x:u+s+5,y:f-5},{x:u+5,y:f-5},{x:u+5,y:f},{x:u,y:f},{x:u,y:f+5}],S=[{x:u,y:f+5},{x:u+s-5,y:f+5},{x:u+s-5,y:w.y-5},{x:u+s,y:w.y-5},{x:u+s,y:f},{x:u,y:f}],P=h.Z.svg(l),M=$(e,{});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let C=createPathFromPoints(k),W=P.path(C,M),v=createPathFromPoints(S),D=P.path(v,M),N=l.insert(()=>W,":first-child");return N.insert(()=>D),N.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",r),N.attr("transform",`translate(0,${-d/2})`),i.attr("transform",`translate(${-(n.width/2)-5-(n.x-(n.left??0))}, ${-(n.height/2)+5-d/2-(n.y-(n.top??0))})`),g(e,N),e.intersect=function(t){let a=R.polygon(e,k,t);return a},l}async function note(t,e,{config:{themeVariables:a}}){let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let n=e.useHtmlLabels||s.iE().flowchart?.htmlLabels!==!1;n||(e.centerLabel=!0);let{shapeSvg:i,bbox:o}=await c(t,e,y(e)),d=Math.max(o.width+(e.padding??0)*2,e?.width??0),p=Math.max(o.height+(e.padding??0)*2,e?.height??0),u=-d/2,f=-p/2,{cssStyles:m}=e,x=h.Z.svg(i),w=$(e,{fill:a.noteBkgColor,stroke:a.noteBorderColor});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=x.rectangle(u,f,d,p,w),S=i.insert(()=>k,":first-child");return S.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",m),l&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",l),g(e,S),e.intersect=function(t){return R.rect(e,t)},i}(0,s.eW)(linedCylinder,"linedCylinder"),(0,s.eW)(linedWaveEdgedRect,"linedWaveEdgedRect"),(0,s.eW)(multiRect,"multiRect"),(0,s.eW)(multiWaveEdgedRectangle,"multiWaveEdgedRectangle"),(0,s.eW)(note,"note");var F=(0,s.eW)((t,e,a)=>`M${t+a/2},${e} L${t+a},${e-a/2} L${t+a/2},${e-a} L${t},${e-a/2} Z`,"createDecisionBoxPathD");async function question(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:i}=await c(t,e,y(e)),o=i.width+e.padding,d=i.height+e.padding,p=o+d,u=[{x:p/2,y:0},{x:p,y:-p/2},{x:p/2,y:-p},{x:0,y:-p/2}],{cssStyles:f}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=F(0,0,p),i=t.path(l,r);a=n.insert(()=>i,":first-child").attr("transform",`translate(${-p/2}, ${p/2})`),f&&a.attr("style",f)}else a=insertPolygonShape(n,p,p,u);return l&&a.attr("style",l),g(e,a),e.intersect=function(t){return s.cM.debug("APA12 Intersect called SPLIT\npoint:",t,"\nnode:\n",e,"\nres:",R.polygon(e,u,t)),R.polygon(e,u,t)},n}async function rect_left_inv_arrow(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0),e?.width??0),o=Math.max(n.height+(e.padding??0),e?.height??0),d=-s/2,p=-o/2,u=p/2,f=[{x:d+u,y:p},{x:d,y:0},{x:d+u,y:-p},{x:-d,y:-p},{x:-d,y:p}],{cssStyles:m}=e,x=h.Z.svg(l),w=$(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=createPathFromPoints(f),S=x.path(k,w),P=l.insert(()=>S,":first-child");return P.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&P.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&P.selectAll("path").attr("style",r),P.attr("transform",`translate(${-u/2},0)`),i.attr("transform",`translate(${-u/2-n.width/2-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),g(e,P),e.intersect=function(t){return R.polygon(e,f,t)},l}async function rectWithTitle(t,e){let a,r,l;let{labelStyles:n,nodeStyles:i}=b(e);e.labelStyle=n,a=e.cssClasses?"node "+e.cssClasses:"node default";let c=t.insert("g").attr("class",a).attr("id",e.domId||e.id),d=c.insert("g"),y=c.insert("g").attr("class","label").attr("style",i),p=e.description,m=e.label,x=y.node().appendChild(await u(m,e.labelStyle,!0,!0)),w={width:0,height:0};if((0,s.ku)(s.nV()?.flowchart?.htmlLabels)){let t=x.children[0],e=(0,o.Ys)(x);w=t.getBoundingClientRect(),e.attr("width",w.width),e.attr("height",w.height)}s.cM.info("Text 2",p);let k=p||[],S=x.getBBox(),P=y.node().appendChild(await u(k.join?k.join("<br/>"):k,e.labelStyle,!0,!0)),M=P.children[0],C=(0,o.Ys)(P);w=M.getBoundingClientRect(),C.attr("width",w.width),C.attr("height",w.height);let W=(e.padding||0)/2;(0,o.Ys)(P).attr("transform","translate( "+(w.width>S.width?0:(S.width-w.width)/2)+", "+(S.height+W+5)+")"),(0,o.Ys)(x).attr("transform","translate( "+(w.width<S.width?0:-(S.width-w.width)/2)+", 0)"),w=y.node().getBBox(),y.attr("transform","translate("+-w.width/2+", "+(-w.height/2-W+3)+")");let v=w.width+(e.padding||0),D=w.height+(e.padding||0),N=-w.width/2-W,B=-w.height/2-W;if("handDrawn"===e.look){let t=h.Z.svg(c),a=$(e,{}),n=t.path(f(N,B,v,D,e.rx||0),a),i=t.line(-w.width/2-W,-w.height/2-W+S.height+W,w.width/2+W,-w.height/2-W+S.height+W,a);l=c.insert(()=>(s.cM.debug("Rough node insert CXC",n),i),":first-child"),r=c.insert(()=>(s.cM.debug("Rough node insert CXC",n),n),":first-child")}else r=d.insert("rect",":first-child"),l=d.insert("line"),r.attr("class","outer title-state").attr("style",i).attr("x",-w.width/2-W).attr("y",-w.height/2-W).attr("width",w.width+(e.padding||0)).attr("height",w.height+(e.padding||0)),l.attr("class","divider").attr("x1",-w.width/2-W).attr("x2",w.width/2+W).attr("y1",-w.height/2-W+S.height+W).attr("y2",-w.height/2-W+S.height+W);return g(e,r),e.intersect=function(t){return R.rect(e,t)},c}async function roundedRect(t,e){let a={rx:5,ry:5,classes:"",labelPaddingX:1*(e?.padding||0),labelPaddingY:1*(e?.padding||0)};return drawRect(t,e,a)}async function shadedProcess(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:s}=await c(t,e,y(e)),o=e?.padding??0,d=Math.max(n.width+(e.padding??0)*2,e?.width??0),p=Math.max(n.height+(e.padding??0)*2,e?.height??0),u=-n.width/2-o,f=-n.height/2-o,{cssStyles:m}=e,x=h.Z.svg(l),w=$(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=[{x:u,y:f},{x:u+d+8,y:f},{x:u+d+8,y:f+p},{x:u-8,y:f+p},{x:u-8,y:f},{x:u,y:f},{x:u,y:f+p}],S=x.polygon(k.map(t=>[t.x,t.y]),w),P=l.insert(()=>S,":first-child");return P.attr("class","basic label-container").attr("style",(0,i.R7)(m)),r&&"handDrawn"!==e.look&&P.selectAll("path").attr("style",r),m&&"handDrawn"!==e.look&&P.selectAll("path").attr("style",r),s.attr("transform",`translate(${-d/2+4+(e.padding??0)-(n.x-(n.left??0))},${-p/2+(e.padding??0)-(n.y-(n.top??0))})`),g(e,P),e.intersect=function(t){return R.rect(e,t)},l}async function slopedRect(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=-s/2,p=-o/2,{cssStyles:u}=e,f=h.Z.svg(l),m=$(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=[{x:d,y:p},{x:d,y:p+o},{x:d+s,y:p+o},{x:d+s,y:p-o/2}],w=createPathFromPoints(x),k=f.path(w,m),S=l.insert(()=>k,":first-child");return S.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",u),r&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",r),S.attr("transform",`translate(0, ${o/4})`),i.attr("transform",`translate(${-s/2+(e.padding??0)-(n.x-(n.left??0))}, ${-o/4+(e.padding??0)-(n.y-(n.top??0))})`),g(e,S),e.intersect=function(t){let a=R.polygon(e,x,t);return a},l}async function squareRect2(t,e){let a={rx:0,ry:0,classes:"",labelPaddingX:2*(e?.padding||0),labelPaddingY:1*(e?.padding||0)};return drawRect(t,e,a)}async function stadium(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:s}=await c(t,e,y(e)),o=s.height+e.padding,d=s.width+o/4+e.padding,{cssStyles:p}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=f(-d/2,-o/2,d,o,o/2),s=t.path(l,r);(a=n.insert(()=>s,":first-child")).attr("class","basic label-container").attr("style",(0,i.R7)(p))}else(a=n.insert("rect",":first-child")).attr("class","basic label-container").attr("style",l).attr("rx",o/2).attr("ry",o/2).attr("x",-d/2).attr("y",-o/2).attr("width",d).attr("height",o);return g(e,a),e.intersect=function(t){return R.rect(e,t)},n}async function state(t,e){return drawRect(t,e,{rx:5,ry:5,classes:"flowchart-node"})}function stateEnd(t,e,{config:{themeVariables:a}}){let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{cssStyles:n}=e,{lineColor:i,stateBorder:s,nodeBorder:o}=a,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),d=h.Z.svg(c),y=$(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let p=d.circle(0,0,14,{...y,stroke:i,strokeWidth:2}),u=s??o,f=d.circle(0,0,5,{...y,fill:u,stroke:u,strokeWidth:2,fillStyle:"solid"}),m=c.insert(()=>p,":first-child");return m.insert(()=>f),n&&m.selectAll("path").attr("style",n),l&&m.selectAll("path").attr("style",l),g(e,m),e.intersect=function(t){return R.circle(e,7,t)},c}function stateStart(t,e,{config:{themeVariables:a}}){let r;let{lineColor:l}=a,n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);if("handDrawn"===e.look){let t=h.Z.svg(n),e=t.circle(0,0,14,m(l));(r=n.insert(()=>e)).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else(r=n.insert("circle",":first-child")).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return g(e,r),e.intersect=function(t){return R.circle(e,7,t)},n}async function subroutine(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),s=(e?.padding||0)/2,o=n.width+e.padding,d=n.height+e.padding,p=-n.width/2-s,u=-n.height/2-s,f=[{x:0,y:0},{x:o,y:0},{x:o,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if("handDrawn"===e.look){let t=h.Z.svg(l),a=$(e,{}),r=t.rectangle(p-8,u,o+16,d,a),n=t.line(p,u,p,u+d,a),s=t.line(p+o,u,p+o,u+d,a);l.insert(()=>n,":first-child"),l.insert(()=>s,":first-child");let c=l.insert(()=>r,":first-child"),{cssStyles:y}=e;c.attr("class","basic label-container").attr("style",(0,i.R7)(y)),g(e,c)}else{let t=insertPolygonShape(l,o,d,f);r&&t.attr("style",r),g(e,t)}return e.intersect=function(t){return R.polygon(e,f,t)},l}async function taggedRect(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),i=Math.max(n.width+(e.padding??0)*2,e?.width??0),s=Math.max(n.height+(e.padding??0)*2,e?.height??0),o=-i/2,d=-s/2,p=.2*s,{cssStyles:u}=e,f=h.Z.svg(l),m=$(e,{}),x=[{x:o-p/2,y:d},{x:o+i+p/2,y:d},{x:o+i+p/2,y:d+s},{x:o-p/2,y:d+s}],w=[{x:o+i-p/2,y:d+s},{x:o+i+p/2,y:d+s},{x:o+i+p/2,y:d+s-.2*s}];"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let k=createPathFromPoints(x),S=f.path(k,m),P=createPathFromPoints(w),M=f.path(P,{...m,fillStyle:"solid"}),C=l.insert(()=>M,":first-child");return C.insert(()=>S,":first-child"),C.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",u),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),g(e,C),e.intersect=function(t){let a=R.polygon(e,x,t);return a},l}async function taggedWaveEdgedRectangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/4,p=.2*s,u=.2*o,f=o+d,{cssStyles:m}=e,x=h.Z.svg(l),w=$(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=[{x:-s/2-s/2*.1,y:f/2},...generateFullSineWavePoints(-s/2-s/2*.1,f/2,s/2+s/2*.1,f/2,d,.8),{x:s/2+s/2*.1,y:-f/2},{x:-s/2-s/2*.1,y:-f/2}],S=-s/2+s/2*.1,P=-f/2-.4*u,M=[{x:S+s-p,y:(P+o)*1.4},{x:S+s,y:P+o-u},{x:S+s,y:(P+o)*.9},...generateFullSineWavePoints(S+s,(P+o)*1.3,S+s-p,(P+o)*1.5,-(.03*o),.5)],C=createPathFromPoints(k),W=x.path(C,w),v=createPathFromPoints(M),D=x.path(v,{...w,fillStyle:"solid"}),N=l.insert(()=>D,":first-child");return N.insert(()=>W,":first-child"),N.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",r),N.attr("transform",`translate(0,${-d/2})`),i.attr("transform",`translate(${-s/2+(e.padding??0)-(n.x-(n.left??0))},${-o/2+(e.padding??0)-d/2-(n.y-(n.top??0))})`),g(e,N),e.intersect=function(t){let a=R.polygon(e,k,t);return a},l}async function text(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),i=Math.max(n.width+e.padding,e?.width||0),s=Math.max(n.height+e.padding,e?.height||0),o=-i/2,h=-s/2,d=l.insert("rect",":first-child");return d.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",o).attr("y",h).attr("width",i).attr("height",s),g(e,d),e.intersect=function(t){return R.rect(e,t)},l}(0,s.eW)(question,"question"),(0,s.eW)(rect_left_inv_arrow,"rect_left_inv_arrow"),(0,s.eW)(rectWithTitle,"rectWithTitle"),(0,s.eW)(roundedRect,"roundedRect"),(0,s.eW)(shadedProcess,"shadedProcess"),(0,s.eW)(slopedRect,"slopedRect"),(0,s.eW)(squareRect2,"squareRect"),(0,s.eW)(stadium,"stadium"),(0,s.eW)(state,"state"),(0,s.eW)(stateEnd,"stateEnd"),(0,s.eW)(stateStart,"stateStart"),(0,s.eW)(subroutine,"subroutine"),(0,s.eW)(taggedRect,"taggedRect"),(0,s.eW)(taggedWaveEdgedRectangle,"taggedWaveEdgedRectangle"),(0,s.eW)(text,"text");var E=(0,s.eW)((t,e,a,r,l,n)=>`M${t},${e}
    a${l},${n} 0,0,1 0,${-r}
    l${a},0
    a${l},${n} 0,0,1 0,${r}
    M${a},${-r}
    a${l},${n} 0,0,0 0,${r}
    l${-a},0`,"createCylinderPathD"),H=(0,s.eW)((t,e,a,r,l,n)=>`M${t},${e} M${t+a},${e} a${l},${n} 0,0,0 0,${-r} l${-a},0 a${l},${n} 0,0,0 0,${r} l${a},0`,"createOuterCylinderPathD"),_=(0,s.eW)((t,e,a,r,l,n)=>`M${t+a/2},${-r/2} a${l},${n} 0,0,0 0,${r}`,"createInnerCylinderPathD");async function tiltedCylinder(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:s,label:o,halfPadding:d}=await c(t,e,y(e)),p="neo"===e.look?2*d:d,u=s.height+p,f=u/2,m=f/(2.5+u/50),x=s.width+m+p,{cssStyles:w}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=H(0,0,x,u,m,f),l=_(0,0,x,u,m,f),i=t.path(r,$(e,{})),s=t.path(l,$(e,{fill:"none"}));a=n.insert(()=>s,":first-child"),(a=n.insert(()=>i,":first-child")).attr("class","basic label-container"),w&&a.attr("style",w)}else{let t=E(0,0,x,u,m,f);(a=n.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,i.R7)(w)).attr("style",l)).attr("class","basic label-container"),w&&a.selectAll("path").attr("style",w),l&&a.selectAll("path").attr("style",l)}return a.attr("label-offset-x",m),a.attr("transform",`translate(${-x/2}, ${u/2} )`),o.attr("transform",`translate(${-(s.width/2)-m-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),g(e,a),e.intersect=function(t){let a=R.rect(e,t),r=a.y-(e.y??0);if(0!=f&&(Math.abs(r)<(e.height??0)/2||Math.abs(r)==(e.height??0)/2&&Math.abs(a.x-(e.x??0))>(e.width??0)/2-m)){let l=m*m*(1-r*r/(f*f));0!=l&&(l=Math.sqrt(Math.abs(l))),l=m-l,t.x-(e.x??0)>0&&(l=-l),a.x+=l}return a},n}async function trapezoid(t,e){let a;let{labelStyles:r,nodeStyles:l}=b(e);e.labelStyle=r;let{shapeSvg:n,bbox:i}=await c(t,e,y(e)),s=i.width+e.padding,o=i.height+e.padding,d=[{x:-3*o/6,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:0,y:-o}],{cssStyles:p}=e;if("handDrawn"===e.look){let t=h.Z.svg(n),r=$(e,{}),l=createPathFromPoints(d),i=t.path(l,r);a=n.insert(()=>i,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),p&&a.attr("style",p)}else a=insertPolygonShape(n,s,o,d);return l&&a.attr("style",l),e.width=s,e.height=o,g(e,a),e.intersect=function(t){return R.polygon(e,d,t)},n}async function trapezoidalPentagon(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),i=Math.max(60,n.width+(e.padding??0)*2,e?.width??0),s=Math.max(20,n.height+(e.padding??0)*2,e?.height??0),{cssStyles:o}=e,d=h.Z.svg(l),p=$(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let u=[{x:-i/2*.8,y:-s/2},{x:i/2*.8,y:-s/2},{x:i/2,y:-s/2*.6},{x:i/2,y:s/2},{x:-i/2,y:s/2},{x:-i/2,y:-s/2*.6}],f=createPathFromPoints(u),m=d.path(f,p),x=l.insert(()=>m,":first-child");return x.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),g(e,x),e.intersect=function(t){let a=R.polygon(e,u,t);return a},l}async function triangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),o=(0,s.ku)(s.nV().flowchart?.htmlLabels),d=n.width+(e.padding??0),p=d+n.height,u=d+n.height,f=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-p}],{cssStyles:m}=e,x=h.Z.svg(l),w=$(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=createPathFromPoints(f),S=x.path(k,w),P=l.insert(()=>S,":first-child").attr("transform",`translate(${-p/2}, ${p/2})`);return m&&"handDrawn"!==e.look&&P.selectChildren("path").attr("style",m),r&&"handDrawn"!==e.look&&P.selectChildren("path").attr("style",r),e.width=d,e.height=p,g(e,P),i.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${p/2-(n.height+(e.padding??0)/(o?2:1)-(n.y-(n.top??0)))})`),e.intersect=function(t){return s.cM.info("Triangle intersect",e,f,t),R.polygon(e,f,t)},l}async function waveEdgedRectangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/8,p=o+d,{cssStyles:u}=e,f=70-s,m=f>0?f/2:0,x=h.Z.svg(l),w=$(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=[{x:-s/2-m,y:p/2},...generateFullSineWavePoints(-s/2-m,p/2,s/2+m,p/2,d,.8),{x:s/2+m,y:-p/2},{x:-s/2-m,y:-p/2}],S=createPathFromPoints(k),P=x.path(S,w),M=l.insert(()=>P,":first-child");return M.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",u),r&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",r),M.attr("transform",`translate(0,${-d/2})`),i.attr("transform",`translate(${-s/2+(e.padding??0)-(n.x-(n.left??0))},${-o/2+(e.padding??0)-d-(n.y-(n.top??0))})`),g(e,M),e.intersect=function(t){let a=R.polygon(e,k,t);return a},l}async function waveRectangle(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n}=await c(t,e,y(e)),i=Math.max(n.width+(e.padding??0)*2,e?.width??0),s=Math.max(n.height+(e.padding??0)*2,e?.height??0),o=i/s,d=i,p=s;d>p*o?p=d/o:d=p*o,d=Math.max(d,100),p=Math.max(p,50);let u=Math.min(.2*p,p/4),f=p+2*u,{cssStyles:m}=e,x=h.Z.svg(l),w=$(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=[{x:-d/2,y:f/2},...generateFullSineWavePoints(-d/2,f/2,d/2,f/2,u,1),{x:d/2,y:-f/2},...generateFullSineWavePoints(d/2,-f/2,-d/2,-f/2,u,-1)],S=createPathFromPoints(k),P=x.path(S,w),M=l.insert(()=>P,":first-child");return M.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",r),g(e,M),e.intersect=function(t){let a=R.polygon(e,k,t);return a},l}async function windowPane(t,e){let{labelStyles:a,nodeStyles:r}=b(e);e.labelStyle=a;let{shapeSvg:l,bbox:n,label:i}=await c(t,e,y(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=-s/2,p=-o/2,{cssStyles:u}=e,f=h.Z.svg(l),m=$(e,{}),x=[{x:d-5,y:p-5},{x:d-5,y:p+o},{x:d+s,y:p+o},{x:d+s,y:p-5}],w=`M${d-5},${p-5} L${d+s},${p-5} L${d+s},${p+o} L${d-5},${p+o} L${d-5},${p-5}
                M${d-5},${p} L${d+s},${p}
                M${d},${p-5} L${d},${p+o}`;"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let k=f.path(w,m),S=l.insert(()=>k,":first-child");return S.attr("transform","translate(2.5, 2.5)"),S.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",u),r&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",r),i.attr("transform",`translate(${-(n.width/2)+2.5-(n.x-(n.left??0))}, ${-(n.height/2)+2.5-(n.y-(n.top??0))})`),g(e,S),e.intersect=function(t){let a=R.polygon(e,x,t);return a},l}async function textHelper(t,e,a,r,l=a.class.padding??12){let n=r?0:3,i=t.insert("g").attr("class",y(e)).attr("id",e.domId||e.id),s=null,o=null,h=null,c=null,d=0,g=0,p=0;if(s=i.insert("g").attr("class","annotation-group text"),e.annotations.length>0){let t=e.annotations[0];await addText(s,{text:`\xab${t}\xbb`},0);let a=s.node().getBBox();d=a.height}o=i.insert("g").attr("class","label-group text"),await addText(o,e,0,["font-weight: bolder"]);let u=o.node().getBBox();g=u.height,h=i.insert("g").attr("class","members-group text");let f=0;for(let t of e.members){let e=await addText(h,t,f,[t.parseClassifier()]);f+=e+n}(p=h.node().getBBox().height)<=0&&(p=l/2),c=i.insert("g").attr("class","methods-group text");let m=0;for(let t of e.methods){let e=await addText(c,t,m,[t.parseClassifier()]);m+=e+n}if(i.node().getBBox(),null!==s){let t=s.node().getBBox();s.attr("transform",`translate(${-t.width/2})`)}return o.attr("transform",`translate(${-u.width/2}, ${d})`),i.node().getBBox(),h.attr("transform",`translate(0, ${d+g+2*l})`),i.node().getBBox(),c.attr("transform",`translate(0, ${d+g+(p?p+4*l:2*l)})`),{shapeSvg:i,bbox:i.node().getBBox()}}async function addText(t,e,a,r=[]){let l;let h=t.insert("g").attr("class","label").attr("style",r.join("; ")),c=(0,s.iE)(),d="useHtmlLabels"in e?e.useHtmlLabels:(0,s.ku)(c.htmlLabels)??!0,g="";g="text"in e?e.text:e.label,!d&&g.startsWith("\\")&&(g=g.substring(1)),(0,s.l0)(g)&&(d=!0);let y=await (0,n.rw)(h,(0,s.uX)((0,i.SH)(g)),{width:(0,i.Cq)(g,c)+50,classes:"markdown-node-label",useHtmlLabels:d},c),p=1;if(d){let t=y.children[0],e=(0,o.Ys)(y);p=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(p+=t.innerHTML.split("<mrow>").length-1);let a=t.getElementsByTagName("img");if(a){let t=""===g.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function setupImage(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=c.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,a=5*parseInt(t,10)+"px";e.style.minWidth=a,e.style.maxWidth=a}else e.style.width="100%";a(e)}(0,s.eW)(setupImage,"setupImage"),setTimeout(()=>{e.complete&&setupImage()}),e.addEventListener("error",setupImage),e.addEventListener("load",setupImage)})))}l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}else{r.includes("font-weight: bolder")&&(0,o.Ys)(y).selectAll("tspan").attr("font-weight",""),p=y.children.length;let t=y.children[0];if(""===y.textContent||y.textContent.includes("&gt")){t.textContent=g[0]+g.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim();let e=" "===g[1];e&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))}"undefined"===t.textContent&&(t.textContent=""),l=y.getBBox()}return h.attr("transform","translate(0,"+(-l.height/(2*p)+a)+")"),l.height}async function classBox(t,e){let a=(0,s.nV)(),r=a.class.padding??12,l=e.useHtmlLabels??(0,s.ku)(a.htmlLabels)??!0;e.annotations=e.annotations??[],e.members=e.members??[],e.methods=e.methods??[];let{shapeSvg:n,bbox:i}=await textHelper(t,e,a,l,r),{labelStyles:c,nodeStyles:d}=b(e);e.labelStyle=c,e.cssStyles=e.styles||"";let y=e.styles?.join(";")||d||"";e.cssStyles||(e.cssStyles=y.replaceAll("!important","").split(";"));let p=0===e.members.length&&0===e.methods.length&&!a.class?.hideEmptyMembersBox,u=h.Z.svg(n),f=$(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let m=i.width,x=i.height;0===e.members.length&&0===e.methods.length?x+=r:e.members.length>0&&0===e.methods.length&&(x+=2*r);let w=-m/2,k=-x/2,S=u.rectangle(w-r,k-r-(p?r:0===e.members.length&&0===e.methods.length?-r/2:0),m+2*r,x+2*r+(p?2*r:0===e.members.length&&0===e.methods.length?-r:0),f),P=n.insert(()=>S,":first-child");P.attr("class","basic label-container");let M=P.node().getBBox();n.selectAll(".text").each((t,a,i)=>{let s=(0,o.Ys)(i[a]),h=s.attr("transform"),c=0;if(h){let t=RegExp(/translate\(([^,]+),([^)]+)\)/),e=t.exec(h);e&&(c=parseFloat(e[2]))}let d=c+k+r-(p?r:0===e.members.length&&0===e.methods.length?-r/2:0);l||(d-=4);let g=w;(s.attr("class").includes("label-group")||s.attr("class").includes("annotation-group"))&&(g=-s.node()?.getBBox().width/2||0,n.selectAll("text").each(function(t,e,a){"middle"===window.getComputedStyle(a[e]).textAnchor&&(g=0)})),s.attr("transform",`translate(${g}, ${d})`)});let C=n.select(".annotation-group").node().getBBox().height-(p?r/2:0)||0,W=n.select(".label-group").node().getBBox().height-(p?r/2:0)||0,v=n.select(".members-group").node().getBBox().height-(p?r/2:0)||0;if(e.members.length>0||e.methods.length>0||p){let t=u.line(M.x,C+W+k+r,M.x+M.width,C+W+k+r,f),e=n.insert(()=>t);e.attr("class","divider").attr("style",y)}if(p||e.members.length>0||e.methods.length>0){let t=u.line(M.x,C+W+v+k+2*r+r,M.x+M.width,C+W+v+k+r+2*r,f),e=n.insert(()=>t);e.attr("class","divider").attr("style",y)}if("handDrawn"!==e.look&&n.selectAll("path").attr("style",y),P.select(":nth-child(2)").attr("style",y),n.selectAll(".divider").select("path").attr("style",y),e.labelStyle?n.selectAll("span").attr("style",e.labelStyle):n.selectAll("span").attr("style",y),!l){let t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(y);if(e){let t=e[0].replace("color","fill");n.selectAll("tspan").attr("style",t)}else if(c){let e=t.exec(c);if(e){let t=e[0].replace("color","fill");n.selectAll("tspan").attr("style",t)}}}return g(e,P),e.intersect=function(t){return R.rect(e,t)},n}(0,s.eW)(tiltedCylinder,"tiltedCylinder"),(0,s.eW)(trapezoid,"trapezoid"),(0,s.eW)(trapezoidalPentagon,"trapezoidalPentagon"),(0,s.eW)(triangle,"triangle"),(0,s.eW)(waveEdgedRectangle,"waveEdgedRectangle"),(0,s.eW)(waveRectangle,"waveRectangle"),(0,s.eW)(windowPane,"windowPane"),(0,s.eW)(textHelper,"textHelper"),(0,s.eW)(addText,"addText"),(0,s.eW)(classBox,"classBox");var z=(0,s.eW)(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function kanbanItem(t,e,{config:a}){let r,l,n,i;let{labelStyles:s,nodeStyles:o}=b(e);e.labelStyle=s||"";let p=e.width;e.width=(e.width??200)-10;let{shapeSvg:u,bbox:m,label:x}=await c(t,e,y(e)),w=e.padding||10,k="";"ticket"in e&&e.ticket&&a?.kanban?.ticketBaseUrl&&(k=a?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),r=u.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",k).attr("target","_blank"));let S={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};r?{label:l,bbox:n}=await d(r,"ticket"in e&&e.ticket||"",S):{label:l,bbox:n}=await d(u,"ticket"in e&&e.ticket||"",S);let{label:P,bbox:M}=await d(u,"assigned"in e&&e.assigned||"",S);e.width=p;let C=e?.width||0,W=Math.max(n.height,M.height)/2,v=Math.max(m.height+20,e?.height||0)+W,D=-C/2,N=-v/2;x.attr("transform","translate("+(w-C/2)+", "+(-W-m.height/2)+")"),l.attr("transform","translate("+(w-C/2)+", "+(-W+m.height/2)+")"),P.attr("transform","translate("+(w+C/2-M.width-20)+", "+(-W+m.height/2)+")");let{rx:B,ry:A}=e,{cssStyles:L}=e;if("handDrawn"===e.look){let t=h.Z.svg(u),a=$(e,{}),r=B||A?t.path(f(D,N,C,v,B||0),a):t.rectangle(D,N,C,v,a);(i=u.insert(()=>r,":first-child")).attr("class","basic label-container").attr("style",L||null)}else{(i=u.insert("rect",":first-child")).attr("class","basic label-container __APA__").attr("style",o).attr("rx",B??5).attr("ry",A??5).attr("x",D).attr("y",N).attr("width",C).attr("height",v);let t="priority"in e&&e.priority;if(t){let e=u.append("line"),a=D+2,r=N+Math.floor((B??0)/2),l=N+v-Math.floor((B??0)/2);e.attr("x1",a).attr("y1",r).attr("x2",a).attr("y2",l).attr("stroke-width","4").attr("stroke",z(t))}}return g(e,i),e.height=v,e.intersect=function(t){return R.rect(e,t)},u}(0,s.eW)(kanbanItem,"kanbanItem");var q=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:squareRect2},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:roundedRect},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:stadium},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:subroutine},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:cylinder},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:circle},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:question},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:hexagon},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:lean_right},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:lean_left},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:trapezoid},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:inv_trapezoid},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:doublecircle},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:text},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:card},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:shadedProcess},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:stateStart},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:stateEnd},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:forkJoin},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:hourglass},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:curlyBraceLeft},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:curlyBraceRight},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:curlyBraces},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:lightningBolt},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:waveEdgedRectangle},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:halfRoundedRectangle},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:tiltedCylinder},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:linedCylinder},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:curvedTrapezoid},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:dividedRectangle},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:triangle},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:windowPane},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:filledCircle},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:trapezoidalPentagon},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:flippedTriangle},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:slopedRect},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:multiWaveEdgedRectangle},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:multiRect},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:bowTieRect},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:crossedCircle},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:taggedWaveEdgedRectangle},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:taggedRect},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:waveRectangle},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:rect_left_inv_arrow},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:linedWaveEdgedRect}],V=(0,s.eW)(()=>{let t=[...Object.entries({state,choice,note,rectWithTitle,labelRect,iconSquare,iconCircle,icon,iconRounded,imageSquare,anchor,kanbanItem,classBox}),...q.flatMap(t=>{let e=[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]];return e.map(e=>[e,t.handler])})];return Object.fromEntries(t)},"generateShapeMap")();function isValidShape(t){return t in V}(0,s.eW)(isValidShape,"isValidShape");var j=new Map;async function insertNode(t,e,a){let r,l;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let n=e.shape?V[e.shape]:void 0;if(!n)throw Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let i;"sandbox"===a.config.securityLevel?i="_top":e.linkTarget&&(i=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",i??null),l=await n(r,e,a)}else r=l=await n(t,e,a);return e.tooltip&&l.attr("title",e.tooltip),j.set(e.id,r),e.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}(0,s.eW)(insertNode,"insertNode");var Y=(0,s.eW)((t,e)=>{j.set(e.id,t)},"setNodeElem"),O=(0,s.eW)(()=>{j.clear()},"clear"),X=(0,s.eW)(t=>{let e=j.get(t.id);s.cM.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode")}}]);