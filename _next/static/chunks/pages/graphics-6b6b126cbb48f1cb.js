(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5557],{60589:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graphics",function(){return n(58869)}])},69535:function(e,t,n){"use strict";n.d(t,{O:function(){return Breadcrumbs}});var r=n(85893),a=n(35185);function Breadcrumbs(){let{normalizePagesResult:{activePath:e},frontMatter:t}=(0,a.ZR)();return(0,r.jsxs)("div",{className:"nextra-breadcrumb mt-1.5 flex items-center gap-1 overflow-hidden text-sm text-gray-500 dark:text-gray-400 contrast-more:text-current",children:[(0,r.jsx)("span",{className:"whitespace-nowrap transition-colors font-medium text-gray-700 contrast-more:font-bold contrast-more:text-current dark:text-gray-100 contrast-more:dark:text-current",title:e[0].title,children:e[0].title}),(0,r.jsxs)("span",{className:"whitespace-nowrap font-medium contrast-more:font-bold text-gray-500 dark:text-gray-400 contrast-more:text-gray-800 contrast-more:dark:text-gray-50",title:e[0].title,children:["\xb7 ",t.readingTime," minute read (",t.wordCount.toLocaleString()," words)"]})]})}},83501:function(e,t,n){"use strict";n.d(t,{T:function(){return ByLine}});var r=n(85893),a=n(25675),i=n.n(a),s={src:"/_next/static/media/tomas.7b3bd350.jpg",height:1656,width:1600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABAEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAKRNf//EAB0QAAIABwEAAAAAAAAAAAAAAAECAAMEEhMUITL/2gAIAQEAAT8Az0QdjsJyYEJv4GI8R//EABcRAAMBAAAAAAAAAAAAAAAAAAACQnL/2gAIAQIBAT8AWtH/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQMicv/aAAgBAwEBPwCRKmEf/9k=",blurWidth:8,blurHeight:8};function ByLine(){return(0,r.jsx)("div",{className:"mt-2 flex items-center border-b pb-2 border-neutral-200/70 contrast-more:border-neutral-400 dark:border-primary-100/10 contrast-more:dark:border-neutral-400",children:(0,r.jsxs)("a",{href:"https://twitter.com/tomasreimers",target:"_blank",className:"flex items-center group",children:[(0,r.jsx)(i(),{className:"w-8 rounded-full mr-2",alt:"Tomas Reimers",src:s}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm transition-colors group-hover:text-primary-800 group-hover:dark:text-primary-600",children:"Tomas Reimers"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 contrast-more:text-gray-800 contrast-more:dark:text-gray-50",children:"Author"})]})]})})}},57558:function(e,t,n){"use strict";n.d(t,{e:function(){return Example}});var r=n(85893),a=n(82183),i=n(1571);function Example(e){let{files:t,template:n,console:s,visibleFiles:o,dependencies:l}=e,d=(0,i.F)();return(0,r.jsx)(a.xR,{options:{classes:{"sp-layout":"mt-6"},showConsole:s,visibleFiles:o},customSetup:{dependencies:l},files:t,template:n,theme:"dark"===d.resolvedTheme?"dark":"light"})}},58869:function(e,t,n){"use strict";n.r(t),n.d(t,{useTOC:function(){return useTOC}});var r=n(85893),a=n(37812),i=n(36430),s=n(79299),o=n(69535),l=n(83501),d=n(57558);function useTOC(e){return[{value:"SVGs: declarative graphics",id:"svgs-declarative-graphics",depth:2},{value:"CSS interop",id:"css-interop",depth:3},{value:"Embedding HTML",id:"embedding-html",depth:3},{value:"SVG animation",id:"svg-animation",depth:3},{value:"Lottie",id:"lottie",depth:3},{value:"Canvas: pixel perfect control",id:"canvas-pixel-perfect-control",depth:2},{value:"Libraries",id:"libraries",depth:3},{value:"WebGL: GPU performance",id:"webgl-gpu-performance",depth:2},{value:"ThreeJS",id:"threejs",depth:3},{value:"React three fiber",id:"react-three-fiber",depth:3},{value:"WebGPU",id:"webgpu",depth:2}]}t.default=(0,a.c)(function(e){let{toc:t=useTOC(e)}=e,n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.O,{}),"\n",(0,r.jsx)(n.h1,{children:"Graphics: Adding wow"}),"\n",(0,r.jsx)(l.T,{}),"\n",(0,r.jsx)(n.p,{children:"Some graphics, visualizations, and other dynamic content cannot (easily) be expressed in HTML and CSS alone. For those, it might be worth switching to an alternative technology. As a general rule,"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Start with HTML and CSS"}),"\n",(0,r.jsx)(n.li,{children:"If you can’t render the visualization in HTML, try SVG, which is a richer way to declaratively express graphics and illustrations (including first-class support for animations)"}),"\n",(0,r.jsx)(n.li,{children:"If SVGs are insufficient, because you need more interaction or graphical filters, canvas provides a full… well, canvas, that you can render on."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:t[0].id,children:t[0].value}),"\n",(0,r.jsxs)(n.p,{children:["While HTML and CSS are a wonderful declarative language to describe documents, they don’t work so well for complex graphics. ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/SVG",children:"SVG"})," is a declarative, XML format to describe graphics."]}),"\n",(0,r.jsxs)(n.p,{children:["Like HTML, SVG provides a handful of ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Element",children:"primitive tags"}),"; however, unlike HTML, those primitives are used for drawing (for example, line, rectangle, etc.)"]}),"\n",(0,r.jsx)(n.p,{children:"Because it’s XML-based, SVGs can:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Be embedded in HTML"}),"\n",(0,r.jsx)(n.li,{children:"Rendered with React"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"At their core, SVGs define shapes on an infinite canvas (somewhat like HTML), and then provide a “viewbox” or rectangle in that canvas that it should render (specified as two pairs of X/Y coordinates)."}),"\n",(0,r.jsx)(d.e,{template:"static",files:{"/index.html":'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Demo app</title>\n  </head>\n  <body>\n    <svg viewBox="0 0 220 100" xmlns="http://www.w3.org/2000/svg">\n      <!-- Simple rectangle -->\n      <rect width="100" height="100" />\n\n      <!-- Rounded corner rectangle -->\n      <rect x="120" width="100" height="100" rx="15" />\n    </svg>\n  </body>\n</html>'}}),"\n",(0,r.jsxs)(n.p,{children:["SVGs can either be inlined (e.g. above), or they can be included as an ",(0,r.jsx)(n.code,{children:"img"})," tag (by saving in a separate file and pointing the ",(0,r.jsx)(n.code,{children:"img"})," tag’s ",(0,r.jsx)(n.code,{children:"src"})," attribute to that file)."]}),"\n",(0,r.jsx)(n.p,{children:"Unlike HTML, where the syntax is meant to be written by hand, the syntax for SVGs can get complicated quickly. For example, here is the syntax to define a polygon (the points are pairs of X/Y coordinates):"}),"\n",(0,r.jsx)(n.pre,{tabIndex:"0","data-language":"svg","data-word-wrap":"",children:(0,r.jsx)(n.code,{children:(0,r.jsx)(n.span,{children:(0,r.jsx)(n.span,{children:'<polygon points="5,5 195,10 185,185 10,195" fill="red" />'})})})}),"\n",(0,r.jsx)(n.p,{children:"For that reason, many people use a library to generate SVGs (or just export them from an image editor)."}),"\n",(0,r.jsx)(n.h3,{id:t[1].id,children:t[1].value}),"\n",(0,r.jsx)(n.p,{children:"Because SVG and HTML are so interoperable, CSS can actually effect both. For example,"}),"\n",(0,r.jsx)(d.e,{template:"static",files:{"/index.html":'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Demo app</title>\n    <link rel="stylesheet" href="/styles.css" />\n  </head>\n  <body>\n    <svg viewBox="0 0 220 100" xmlns="http://www.w3.org/2000/svg">\n      <!-- Simple rectangle -->\n      <rect width="100" height="100" />\n\n      <!-- Rounded corner rectangle -->\n      <rect x="120" width="100" height="100" rx="15" />\n    </svg>\n  </body>\n</html>',"/styles.css":"svg rect {\n  fill: red;\n}"}}),"\n",(0,r.jsx)(n.h3,{id:t[2].id,children:t[2].value}),"\n",(0,r.jsxs)(n.p,{children:["Not only can you embed SVGs in HTML, you can also embed HTML in SVGs using ",(0,r.jsx)(n.code,{children:"foreignObject"}),":"]}),"\n",(0,r.jsx)(d.e,{template:"static",files:{"/index.html":'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Demo app</title>\n  </head>\n  <body>\n    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">\n      <polygon points="5,5 195,10 185,185 10,195" fill="red" />\n\n      <foreignObject x="20" y="20" width="160" height="160">\n        <div xmlns="http://www.w3.org/1999/xhtml">\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed mollis mollis\n          mi ut ultricies. Nullam magna ipsum, porta vel dui convallis, rutrum\n          imperdiet eros. Aliquam erat volutpat.\n        </div>\n      </foreignObject>\n    </svg>\n  </body>\n</html>'}}),"\n",(0,r.jsx)(n.h3,{id:t[3].id,children:t[3].value}),"\n",(0,r.jsxs)(n.p,{children:["SVGs can be animated via the ",(0,r.jsx)(n.code,{children:"animate"})," primitive (sometimes called ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/SVG/SVG_animation_with_SMIL",children:"SMIL"}),")."]}),"\n",(0,r.jsx)(d.e,{template:"static",files:{"/index.html":'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Demo app</title>\n  </head>\n  <body>\n    <svg width="300" height="100">\n      <rect x="0" y="0" width="300" height="100" stroke="black" stroke-width="1" />\n      <circle cx="0" cy="50" r="15" fill="blue" stroke="black" stroke-width="1">\n        <animate\n          attributeName="cx"\n          from="0"\n          to="500"\n          dur="5s"\n          repeatCount="indefinite" />\n      </circle>\n    </svg>\n  </body>\n</html>'}}),"\n",(0,r.jsx)(n.h3,{id:t[4].id,children:t[4].value}),"\n",(0,r.jsxs)(n.p,{children:["Again, while animations can be written by hand, most designers prefer to iterate on them in a graphics editor and later export the animation. ",(0,r.jsx)(n.a,{href:"https://lottiefiles.com/what-is-lottie",children:"Lottie"})," is a format developed by Airbnb to export SVG animations as JSON files."]}),"\n",(0,r.jsx)(n.h2,{id:t[5].id,children:t[5].value}),"\n",(0,r.jsx)(n.p,{children:"While SVGs are powerful, sometimes you really want pixel-perfect control. For that, there is Canvas."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API",children:"Canvas"})," allows developers to define an area that they can programmatically draw on."]}),"\n",(0,r.jsx)(d.e,{template:"react",files:{"/App.js":'import React, { useRef, useEffect } from "react";\nimport { createRoot } from "react-dom/client";\n\nexport default function App() {\n  const ref = useRef();\n  useEffect(() => {\n    const canvas = ref.current;\n    const ctx = canvas.getContext("2d");\n\n    ctx.fillStyle = "green";\n    ctx.fillRect(10, 10, 150, 100);\n  }, []);\n  \n  return <canvas ref={ref} />\n}'}}),"\n",(0,r.jsx)(n.h3,{id:t[6].id,children:t[6].value}),"\n",(0,r.jsxs)(n.p,{children:["Because the Canvas API is so low level, many people use a higher level library (e.g. ",(0,r.jsx)(n.a,{href:"https://pixijs.com/",children:"Pixi"})," and ",(0,r.jsx)(n.a,{href:"http://fabricjs.com/",children:"Fabric"}),")."]}),"\n",(0,r.jsx)(n.h2,{id:t[7].id,children:t[7].value}),"\n",(0,r.jsx)(n.p,{children:"If you start to use Canvas for realtime graphics (or games), you’ll quickly run into a performance problem. This isn’t specific to JavaScript, and why native apps leverage the graphics card for anything intense (a specialized piece of hardware that can quickly do mathematical operations involved in rendering 3D graphics)."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API",children:"WebGL"})," allows JavaScript to use the graphics card."]}),"\n",(0,r.jsx)(n.h3,{id:t[8].id,children:t[8].value}),"\n",(0,r.jsxs)(n.p,{children:["The APIs behind WebGL, especially for 3D, are really low level, and as a result, most people interact with it through a library, specifically ",(0,r.jsx)(n.a,{href:"https://threejs.org/",children:"Three.js"}),". Three handles all of the internals of 3D rendering, and provides human-readable primitives for math, shapes, cameras, etc."]}),"\n",(0,r.jsx)(d.e,{template:"vanilla",dependencies:{three:"^0.166.1"},files:{"/index.html":'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Demo app</title>\n  </head>\n  <body>\n  </body>\n</html>',"/index.js":"import * as THREE from 'three';\n\nconst scene = new THREE.Scene();\nconst camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );\n\nconst renderer = new THREE.WebGLRenderer();\nrenderer.setSize( window.innerWidth, window.innerHeight );\nrenderer.setAnimationLoop( animate );\ndocument.body.appendChild( renderer.domElement );\n\nconst geometry = new THREE.BoxGeometry( 1, 1, 1 );\nconst material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );\nconst cube = new THREE.Mesh( geometry, material );\nscene.add( cube );\n\ncamera.position.z = 5;\n\nfunction animate() {\n\n	cube.rotation.x += 0.01;\n	cube.rotation.y += 0.01;\n\n	renderer.render( scene, camera );\n\n}"}}),"\n",(0,r.jsx)(n.h3,{id:t[9].id,children:t[9].value}),"\n",(0,r.jsxs)(n.p,{children:["Like many Graphics libraries, Three is imperative in nature; because it is not declarative, it can be awkward to use alongside React. ",(0,r.jsx)(n.a,{href:"https://docs.pmnd.rs/react-three-fiber/getting-started/introduction",children:"React-three-fiber"})," bridges that gap, by providing react primitives for Three concepts."]}),"\n",(0,r.jsx)(d.e,{template:"react",dependencies:{"@react-three/fiber":"^8.16.8",three:"^0.166.1"},files:{"/App.js":"import React, { useRef, useState } from 'react'\nimport { Canvas, useFrame } from '@react-three/fiber'\n\nfunction Box(props) {\n  // This reference will give us direct access to the mesh\n  const meshRef = useRef()\n  // Set up state for the hovered and active state\n  const [hovered, setHover] = useState(false)\n  const [active, setActive] = useState(false)\n  // Subscribe this component to the render-loop, rotate the mesh every frame\n  useFrame((state, delta) => (meshRef.current.rotation.x += delta))\n  // Return view, these are regular three.js elements expressed in JSX\n  return (\n    <mesh\n      {...props}\n      ref={meshRef}\n      scale={active ? 1.5 : 1}\n      onClick={(event) => setActive(!active)}\n      onPointerOver={(event) => setHover(true)}\n      onPointerOut={(event) => setHover(false)}>\n      <boxGeometry args={[1, 1, 1]} />\n      <meshStandardMaterial color={hovered ? 'hotpink' : 'orange'} />\n    </mesh>\n  )\n}\n\nexport default function App() {\n  return <Canvas>\n    <ambientLight intensity={Math.PI / 2} />\n    <spotLight position={[10, 10, 10]} angle={0.15} penumbra={1} decay={0} intensity={Math.PI} />\n    <pointLight position={[-10, -10, -10]} decay={0} intensity={Math.PI} />\n    <Box position={[-1.2, 0, 0]} />\n    <Box position={[1.2, 0, 0]} />\n  </Canvas>;\n}"}}),"\n",(0,r.jsx)(n.p,{children:"In addition, it will do all the necessary Three.js cleanup as elements are mounted and unmounted."}),"\n",(0,r.jsx)(n.h2,{id:t[10].id,children:t[10].value}),"\n",(0,r.jsxs)(n.p,{children:["While WebGL is very powerful, it’s also getting old. GPUs have really advanced in leaps and bounds over the past few years and the ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/WebGPU_API",children:"WebGPU"})," spec is a successor to WebGL currently being implemented that provides access to new GPU features, and enables developers to leverage the GPU for general-purpose compute."]})]})},"/graphics",{filePath:"pages/graphics.mdx",timestamp:173613957e4,pageMap:i.v,frontMatter:{wordCount:625,readingTime:4},title:"Graphics: Adding wow"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC)},36430:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});let r=[{data:{index:{title:"Foreword",theme:{navbar:!0,breadcrumb:!1}},"-- Platform":{type:"separator",title:"WEB FUNDAMENTALS"},html:{title:"Chapter 1: HTML",theme:{breadcrumb:!1}},css:{title:"Chapter 2: CSS",theme:{breadcrumb:!1}},javascript:{title:"Chapter 3: JavaScript",theme:{breadcrumb:!1}},"-- React":{type:"separator",title:"REACT ESSENTIALS"},components:{title:"Chapter 4: Components",theme:{breadcrumb:!1}},applications:{title:"Chapter 5: Applications",theme:{breadcrumb:!1}},"build-tooling":{title:"Chapter 6: Build tooling",theme:{breadcrumb:!1}},"profiling-and-testing":{title:"Chapter 7: Profiling & testing",theme:{breadcrumb:!1}},"-- Design":{type:"separator",title:"DESIGN PRINCIPLES"},"design-systems":{title:"Chapter 8: Design systems",theme:{breadcrumb:!1}},graphics:{title:"Chapter 9: Graphics",theme:{breadcrumb:!1}},"-- Data":{type:"separator",title:"DATA ARCHITECTURE"},state:{title:"Chapter 10: Managing state",theme:{breadcrumb:!1}},network:{title:"Chapter 11: Network & sync",theme:{breadcrumb:!1}},"client-compute":{title:"Chapter 12: Client compute",theme:{breadcrumb:!1}}}},{name:"applications",route:"/applications",frontMatter:{sidebarTitle:"Applications"}},{name:"build-tooling",route:"/build-tooling",frontMatter:{sidebarTitle:"Build Tooling"}},{name:"client-compute",route:"/client-compute",frontMatter:{sidebarTitle:"Client Compute"}},{name:"components",route:"/components",frontMatter:{sidebarTitle:"Components"}},{name:"css",route:"/css",frontMatter:{sidebarTitle:"CSS"}},{name:"design-systems",route:"/design-systems",frontMatter:{sidebarTitle:"Design Systems"}},{name:"graphics",route:"/graphics",frontMatter:{sidebarTitle:"Graphics"}},{name:"html",route:"/html",frontMatter:{sidebarTitle:"HTML"}},{name:"index",route:"/",frontMatter:{sidebarTitle:"Index"}},{name:"javascript",route:"/javascript",frontMatter:{sidebarTitle:"JavaScript"}},{name:"network",route:"/network",frontMatter:{sidebarTitle:"Network"}},{name:"profiling-and-testing",route:"/profiling-and-testing",frontMatter:{sidebarTitle:"Profiling and Testing"}},{name:"state",route:"/state",frontMatter:{sidebarTitle:"State"}}]}},function(e){e.O(0,[5762,1827,7812,4911,9774,2888,179],function(){return e(e.s=60589)}),_N_E=e.O()}]);